(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DocumentsView"],{"1ab9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"max-w-5xl w-full flex flex-col justify-center items-center md:pt-8 md:px-4"},[a("toolbar",[a("r-field",{attrs:{label:"Search"}},[a("input",{staticClass:"input",attrs:{placeholder:"Search",type:"text"},on:{input:t.searchDebounced,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchImmediate(e)}}})])],1),[a("div",{staticClass:"container flex justify-start items-end mt-4"},[a("button",{staticClass:"text-gray-600 ml-1 mr-0 font-semibold hover:text-gray-800",on:{click:t.createDocument}},[a("i",{staticClass:"pr-2 fas fa-plus"}),t._v(" New document")]),a("button",{staticClass:"text-gray-600 ml-auto mr-0 hover:text-gray-800",on:{click:t.getDocuments}},[a("i",{staticClass:"pr-4 fas fa-sync"})])]),t.filteredDocuments.length>0?a("div",{staticClass:"container mt-4"},t._l(t.filteredDocuments,function(e){return a("div",{key:e.id,staticClass:"w-full flex items-center h-12 px-4 mb-2 rounded bg-gray-200 shadow-md text-md"},[a("span",{staticClass:"max-w-64 block font-semibold text-gray-800 px-4"},[t._v(t._s(e.title))]),a("span",{staticClass:"max-w-64 block font-semibold italic text-xs text-gray-800 px-4 ml-auto"},[t._v(t._s(e.fileName)+" "+t._s(e.fileExtension))]),a("span",{staticClass:"block font-semibold text-xs text-gray-800 mr-4"},[t._v(t._s(t._f("date")(e.uploadDate)))]),a("div",[a("a",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Download",href:"/api/documents/"+e.id}},[a("i",{staticClass:"fas fa-download"})]),a("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Edit"},on:{click:function(a){return t.editDocument(e)}}},[a("i",{staticClass:"fas fa-pen"})]),a("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Delete"},on:{click:function(a){return t.tryDeleteDocument(e)}}},[a("i",{staticClass:"fas fa-trash"})])])])}),0):t._e()],0==t.filteredDocuments.length?a("div",{staticClass:"container flex justify-center mt-16"},[t._m(0)]):t._e(),a("document-form",{attrs:{visible:t.showForm,document:t.selected},on:{close:t.closeDocumentForm}})],2)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-xl text-gray-600"},[a("span",{staticClass:"icon pr-2"},[a("i",{staticClass:"fas fa-frown"})]),t._v(" No documents found")])}],i=a("2f62"),n=a("eec9"),c=a("80d1"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("r-modal",{attrs:{active:t.visible},on:{close:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[a("p",{staticClass:"ml-6 my-3 font-bold  text-xl text-gray-700"},[t._v(t._s(t.title))])]},proxy:!0},{key:"default",fn:function(){return[t.formData?a("div",{staticClass:"m-6 flex flex-row flex-wrap align-center justify-between"},[a("div",{staticClass:"w-full"},[a("r-field",{attrs:{label:"Title"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.title,expression:"formData.title"}],staticClass:"input",attrs:{type:"text",placeholder:"Title"},domProps:{value:t.formData.title},on:{input:function(e){e.target.composing||t.$set(t.formData,"title",e.target.value)}}})]),a("r-field",{attrs:{label:"File"}},[a("file-input",{attrs:{placeholder:"File"},model:{value:t.formData.file,callback:function(e){t.$set(t.formData,"file",e)},expression:"formData.file"}})],1)],1)]):t._e()]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"m-3 flex flex-row justify-end items-center"},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.saving},on:{click:t.trySave}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-save"})]),t._v(" Save")]),a("button",{staticClass:"btn btn-outline-secondary ml-auto",on:{click:t.close}},[t._v("Cancel")])])]},proxy:!0}])})},o=[],u=a("0942"),m=a("5b7c"),f=a("8fb6"),d=a("7a3f"),p=a("d2d0"),h=a("df33"),x=(a("c1df"),{name:"DocumentForm",components:{RField:u["a"],RModal:m["a"],RSelect:f["a"],DateInput:d["a"],FileInput:p["a"],CurrencyInput:h["a"]},mixins:[n["a"]],props:{visible:{type:Boolean,required:!0},document:{type:Object,default:null}},data(){return{saving:!1,formData:null}},computed:{title(){return this.document?this.document.title:"New document"}},watch:{document:{immediate:!0,handler:function(t){this.formData=t?{...t}:{title:"",file:null}}}},methods:{...Object(i["b"])({createOrUpdate:"apartment/createOrUpdateDocument"}),fileSelected(t){this.formData.file=t.target.files[0]},close(){this.$emit("close")},async trySave(){try{this.saving=!0,this.createOrUpdate(this.formData),this.close()}catch(t){console.error(t)}finally{this.saving=!1}}}}),v=x,b=a("2877"),y=Object(b["a"])(v,r,o,!1,null,null,null),D=y.exports,C=a("8fc4"),g={name:"DocumentList",components:{DocumentForm:D,Toolbar:C["a"],RField:u["a"],RSelect:f["a"]},mixins:[n["a"],c["a"]],data(){return{selectedDate:new Date,selected:null,showForm:!1}},computed:{...Object(i["e"])({documents:t=>t.apartment.documents}),filteredDocuments(){let t=this.documents;return this.searchQuery&&(t=t.filter(this.fieldFilter)),t}},methods:{...Object(i["b"])({getDocuments:"apartment/getDocuments",deleteDocument:"apartment/deleteDocument"}),createDocument(){this.selected=null,this.showForm=!0},editDocument(t){this.selected=t,this.showForm=!0},async tryDeleteDocument(t){await this.deleteDocument(t.id)},closeDocumentForm(){this.selected=null,this.showForm=!1}}},w=g,_=Object(b["a"])(w,s,l,!1,null,"41690f99",null);e["default"]=_.exports},"2ab7":function(t,e,a){"use strict";var s=a("8c9c"),l=a.n(s);l.a},"4ba8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex justify-center items-center p-2 md:p-4"},[t.activeApartment?a("router-view"):a("div",{staticClass:"mt-12"},[a("h1",{staticClass:"text-gray-900"},[t._v("Please pick an apartment to see its documents")])])],1)},l=[],i=a("2f62"),n={name:"DocumentsView",computed:{...Object(i["e"])({activeApartment:t=>t.global.activeApartment})},watch:{activeApartment:{immediate:!0,handler:function(t){t&&this.getDocuments(t.id)}}},methods:{...Object(i["b"])({getDocuments:"apartment/getDocuments"})}},c=n,r=a("2877"),o=Object(r["a"])(c,s,l,!1,null,"6fb7aef7",null);e["default"]=o.exports},"8c9c":function(t,e,a){},d2d0:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"file input"},[a("label",{staticClass:"text-lg"},[t._m(0),t._v("\n    "+t._s(this.file?this.file.name:"Choose a file...")+"\n  ")]),a("input",{attrs:{type:"file"},on:{change:t.fileSelected}})])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon pr-4"},[a("i",{staticClass:"fas fa-file-upload"})])}],i={name:"FileInput",inheritAttrs:!0,props:{value:{type:File,default:null}},data(){return{file:null}},methods:{fileSelected(t){this.file=t.target.files[0],console.log(this.file),this.$emit("input",this.file)}}},n=i,c=(a("2ab7"),a("2877")),r=Object(c["a"])(n,s,l,!1,null,"6edae47d",null);e["a"]=r.exports}}]);
//# sourceMappingURL=DocumentsView.js.map