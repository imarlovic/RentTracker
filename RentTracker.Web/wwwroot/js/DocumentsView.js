(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DocumentsView"],{"14aa":function(t,e,n){},"1ab9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?n("loading-indicator"):n("div",{staticClass:"max-w-5xl w-full flex flex-col justify-center items-center sm:pt-4 md:pt-8 xl:px-4"},[n("toolbar",[n("r-field",{attrs:{label:"Search"}},[n("input",{staticClass:"input",attrs:{placeholder:"Search",type:"text"},on:{input:t.searchDebounced,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchImmediate(e)}}})])],1),n("div",{staticClass:"min-w-full container flex justify-start items-end mt-4"},[n("button",{staticClass:"text-gray-600 ml-1 mr-0 font-semibold hover:text-gray-800",on:{click:t.createDocument}},[n("i",{staticClass:"pr-2 fas fa-plus"}),t._v(" New document")]),n("button",{staticClass:"text-gray-600 ml-auto mr-0 hover:text-gray-800",on:{click:t.getDocuments}},[n("i",{staticClass:"pr-4 fas fa-sync"})])]),t.filteredDocuments.length>0?n("div",{staticClass:"min-w-full container mt-4"},t._l(t.filteredDocuments,function(e){return n("div",{key:e.id,staticClass:"w-full flex items-center h-20 md:h-12 px-4 mb-2 rounded bg-gray-200 shadow-md text-xs md:text-sm xl:text-md"},[n("div",{staticClass:"flex flex-col md:flex-row"},[n("span",{staticClass:"max-w-64 block font-bold md:font-semibold text-gray-800 px-4"},[t._v(t._s(e.title))]),n("span",{staticClass:"max-w-64 block font-semibold italic text-xs text-gray-800 px-4"},[t._v(t._s(e.fileName)+" "+t._s(e.fileExtension))])]),n("span",{staticClass:"ml-auto block font-semibold text-xs text-gray-800 mr-4"},[t._v(t._s(t._f("date")(e.uploadDate)))]),n("div",{staticClass:"flex"},[n("a",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Download",href:"/api/documents/"+e.id}},[n("i",{staticClass:"fas fa-download"})]),n("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Edit"},on:{click:function(n){return t.editDocument(e)}}},[n("i",{staticClass:"fas fa-pen"})]),n("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Delete"},on:{click:function(n){return t.tryDeleteDocument(e)}}},[n("i",{staticClass:"fas fa-trash"})])])])}),0):t._e(),0==t.filteredDocuments.length?n("div",{staticClass:"container flex justify-center mt-16"},[n("p",{staticClass:"text-xl text-gray-600"},[n("span",{staticClass:"icon pr-2"},[n("i",{staticClass:"fas fa-frown"})]),t._v(" No documents found")])]):t._e(),n("document-form",{attrs:{visible:t.showForm,document:t.selected},on:{close:t.closeDocumentForm}})],1)},i=[],r=(n("96cf"),n("3b8d")),s=n("cebc"),c=n("2f62"),o=n("eec9"),l=n("80d1"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("r-modal",{attrs:{active:t.visible},on:{close:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("p",{staticClass:"ml-6 my-3 font-bold  text-xl text-gray-700"},[t._v(t._s(t.title))])]},proxy:!0},{key:"default",fn:function(){return[t.formData?n("div",{staticClass:"m-6 flex flex-row flex-wrap align-center justify-between"},[n("div",{staticClass:"w-full"},[n("r-field",{attrs:{label:"Title"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.title,expression:"formData.title"}],staticClass:"input",attrs:{type:"text",placeholder:"Title"},domProps:{value:t.formData.title},on:{input:function(e){e.target.composing||t.$set(t.formData,"title",e.target.value)}}})]),n("r-field",{attrs:{label:"File"}},[n("file-input",{attrs:{placeholder:"File"},model:{value:t.formData.file,callback:function(e){t.$set(t.formData,"file",e)},expression:"formData.file"}})],1)],1)]):t._e()]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"m-3 flex flex-row justify-end items-center"},[n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.saving},on:{click:t.trySave}},[n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-save"})]),t._v(" Save")]),n("button",{staticClass:"btn btn-outline-secondary ml-auto",on:{click:t.close}},[t._v("Cancel")])])]},proxy:!0}])})},f=[],d=n("0942"),m=n("5b7c"),p=n("8fb6"),h=n("7a3f"),v=n("d2d0"),b=n("df33"),x=(n("c1df"),{name:"DocumentForm",components:{RField:d["a"],RModal:m["a"],RSelect:p["a"],DateInput:h["a"],FileInput:v["a"],CurrencyInput:b["a"]},mixins:[o["a"]],props:{visible:{type:Boolean,required:!0},document:{type:Object,default:null}},data:function(){return{saving:!1,formData:null}},computed:{title:function(){return this.document?this.document.title:"New document"}},watch:{document:{immediate:!0,handler:function(t){this.formData=t?Object(s["a"])({},t):{title:"",file:null}}}},methods:Object(s["a"])({},Object(c["b"])({createOrUpdate:"apartment/createOrUpdateDocument"}),{fileSelected:function(t){this.formData.file=t.target.files[0]},close:function(){this.$emit("close")},trySave:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:try{this.saving=!0,this.createOrUpdate(this.formData),this.close()}catch(e){console.error(e)}finally{this.saving=!1}case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()})}),y=x,g=n("2877"),w=Object(g["a"])(y,u,f,!1,null,null,null),C=w.exports,D=n("a4a1"),_=n("8fc4"),j={name:"DocumentList",components:{DocumentForm:C,Toolbar:_["a"],LoadingIndicator:D["a"],RField:d["a"],RSelect:p["a"]},mixins:[o["a"],l["a"]],data:function(){return{selectedDate:new Date,selected:null,showForm:!1}},computed:Object(s["a"])({},Object(c["e"])({isLoading:function(t){return t.apartment.status.document.loading},documents:function(t){return t.apartment.documents}}),{filteredDocuments:function(){var t=this.documents;return this.searchQuery&&(t=t.filter(this.fieldFilter)),t}}),methods:Object(s["a"])({},Object(c["b"])({getDocuments:"apartment/getDocuments",deleteDocument:"apartment/deleteDocument"}),{createDocument:function(){this.selected=null,this.showForm=!0},editDocument:function(t){this.selected=t,this.showForm=!0},tryDeleteDocument:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.deleteDocument(e.id);case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),closeDocumentForm:function(){this.selected=null,this.showForm=!1}})},O=j,k=Object(g["a"])(O,a,i,!1,null,"62f77cb4",null);e["default"]=k.exports},"2ab7":function(t,e,n){"use strict";var a=n("8c9c"),i=n.n(a);i.a},"3b2b":function(t,e,n){var a=n("7726"),i=n("5dbc"),r=n("86cc").f,s=n("9093").f,c=n("aae3"),o=n("0bfb"),l=a.RegExp,u=l,f=l.prototype,d=/a/g,m=/a/g,p=new l(d)!==d;if(n("9e1e")&&(!p||n("79e5")(function(){return m[n("2b4c")("match")]=!1,l(d)!=d||l(m)==m||"/a/i"!=l(d,"i")}))){l=function(t,e){var n=this instanceof l,a=c(t),r=void 0===e;return!n&&a&&t.constructor===l&&r?t:i(p?new u(a&&!r?t.source:t,e):u((a=t instanceof l)?t.source:t,a&&r?o.call(t):e),n?this:f,l)};for(var h=function(t){t in l||r(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},v=s(u),b=0;v.length>b;)h(v[b++]);f.constructor=l,l.prototype=f,n("2aba")(a,"RegExp",l)}n("7a56")("RegExp")},"456d":function(t,e,n){var a=n("4bf8"),i=n("0d58");n("5eda")("keys",function(){return function(t){return i(a(t))}})},"4ba8":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-full flex flex-col justify-start items-center md:p-4"},[t.activeApartment?n("router-view"):n("div",{staticClass:"mt-12"},[n("h1",{staticClass:"text-gray-900"},[t._v("Please pick an apartment to see its documents")])])],1)},i=[],r=n("cebc"),s=n("2f62"),c={name:"DocumentsView",computed:Object(r["a"])({},Object(s["e"])({activeApartment:function(t){return t.global.activeApartment}})),watch:{activeApartment:{immediate:!0,handler:function(t){t&&this.getDocuments(t.id)}}},methods:Object(r["a"])({},Object(s["b"])({getDocuments:"apartment/getDocuments"}))},o=c,l=n("2877"),u=Object(l["a"])(o,a,i,!1,null,"857d79da",null);e["default"]=u.exports},"5b7c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.active?n("div",{staticClass:"modal-container fixed top-0 right-0 w-screen h-screen overflow-auto flex flex-col justify-center items-center"},[n("div",{staticClass:"modal-backdrop absolute top-0 right-0 w-screen h-screen bg-gray-700 opacity-75",on:{click:t.close}}),n("div",{staticClass:"modal-content max-w-full h-full md:h-auto flex flex-col bg-white rounded shadow-lg",class:t.contentClass},[n("div",{staticClass:"modal-header"},[t._t("header")],2),n("div",{staticClass:"modal-body flex-grow md:flex-grow-0"},[t._t("default")],2),n("div",{staticClass:"modal-footer"},[t._t("footer")],2)])]):t._e()},i=[],r={name:"RModal",props:{active:{type:Boolean,required:!0},size:{type:String,default:"md"}},computed:{contentClass:function(){var t=[];switch(this.size){case"md":t.push("modal-size-md")}return t.join(" ")}},methods:{close:function(){this.$emit("close")}}},s=r,c=(n("b11f"),n("2877")),o=Object(c["a"])(s,a,i,!1,null,"6b5ed9fd",null);e["a"]=o.exports},"5eda":function(t,e,n){var a=n("5ca1"),i=n("8378"),r=n("79e5");t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),a(a.S+a.F*r(function(){n(1)}),"Object",s)}},"80d1":function(t,e,n){"use strict";n("ac6a"),n("456d"),n("3b2b");var a=n("f7fe"),i=n.n(a);e["a"]={data:function(){return{searchQuery:""}},computed:{fieldFilter:function(){var t=new RegExp(this.searchQuery,"i"),e=function(e){return Object.keys(e).some(function(n){return t.test(e[n])})};return e}},methods:{searchDebounced:i()(function(t){this.searchQuery=t.target.value},500),searchImmediate:function(t){this.searchQuery=t.target.value}}}},"8c9c":function(t,e,n){},b11f:function(t,e,n){"use strict";var a=n("14aa"),i=n.n(a);i.a},d2d0:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"file input"},[n("label",{staticClass:"text-lg"},[t._m(0),t._v("\n    "+t._s(this.file?this.file.name:"Choose a file...")+"\n  ")]),n("input",{attrs:{type:"file"},on:{change:t.fileSelected}})])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon pr-4"},[n("i",{staticClass:"fas fa-file-upload"})])}],r={name:"FileInput",inheritAttrs:!0,props:{value:{type:File,default:null}},data:function(){return{file:null}},methods:{fileSelected:function(t){this.file=t.target.files[0],console.log(this.file),this.$emit("input",this.file)}}},s=r,c=(n("2ab7"),n("2877")),o=Object(c["a"])(s,a,i,!1,null,"6edae47d",null);e["a"]=o.exports},df33:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.formattedValue},on:{input:function(e){return t.parseValue(e.target.value)},focus:function(e){t.isEditing=!0},blur:function(e){t.isEditing=!1},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur()}}})},i=[],r=(n("6b54"),n("a481"),n("c5f6"),n("eec9")),s={name:"CurrencyInput",inheritAttrs:!0,mixins:[r["a"]],props:{value:{type:Number,default:0},currency:{type:String,default:"HRK"}},data:function(){return{isEditing:!1}},computed:{formattedValue:function(){var t=this.value?this.value:0;return this.isEditing?t.toString().replace(".",","):t.toLocaleString("hr-HR",{style:"currency",currency:this.currency})}},methods:{parseValue:function(t){this.$emit("input",parseFloat(t.replace(",",".")))}}},c=s,o=n("2877"),l=Object(o["a"])(c,a,i,!1,null,null,null);e["a"]=l.exports},f7fe:function(t,e,n){(function(e){var n="Expected a function",a=NaN,i="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,d=u||f||Function("return this")(),m=Object.prototype,p=m.toString,h=Math.max,v=Math.min,b=function(){return d.Date.now()};function x(t,e,a){var i,r,s,c,o,l,u=0,f=!1,d=!1,m=!0;if("function"!=typeof t)throw new TypeError(n);function p(e){var n=i,a=r;return i=r=void 0,u=e,c=t.apply(a,n),c}function x(t){return u=t,o=setTimeout(D,e),f?p(t):c}function g(t){var n=t-l,a=t-u,i=e-n;return d?v(i,s-a):i}function w(t){var n=t-l,a=t-u;return void 0===l||n>=e||n<0||d&&a>=s}function D(){var t=b();if(w(t))return _(t);o=setTimeout(D,g(t))}function _(t){return o=void 0,m&&i?p(t):(i=r=void 0,c)}function j(){void 0!==o&&clearTimeout(o),u=0,i=l=r=o=void 0}function O(){return void 0===o?c:_(b())}function k(){var t=b(),n=w(t);if(i=arguments,r=this,l=t,n){if(void 0===o)return x(l);if(d)return o=setTimeout(D,e),p(l)}return void 0===o&&(o=setTimeout(D,e)),c}return e=C(e)||0,y(a)&&(f=!!a.leading,d="maxWait"in a,s=d?h(C(a.maxWait)||0,e):s,m="trailing"in a?!!a.trailing:m),k.cancel=j,k.flush=O,k}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function w(t){return"symbol"==typeof t||g(t)&&p.call(t)==i}function C(t){if("number"==typeof t)return t;if(w(t))return a;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=c.test(t);return n||o.test(t)?l(t.slice(2),n?2:8):s.test(t)?a:+t}t.exports=x}).call(this,n("c8ba"))}}]);
//# sourceMappingURL=DocumentsView.js.map