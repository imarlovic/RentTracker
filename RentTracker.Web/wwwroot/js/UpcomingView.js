(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["UpcomingView"],{"42d2":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"max-h-full max-w-full flex justify-center items-start flex-grow"},[t.activeApartment?s("upcoming-timeline"):s("div",{staticClass:"mt-12"},[s("h1",{staticClass:"text-gray-900"},[t._v("Please pick an apartment to see upcoming reservations")])])],1)},i=[],r=s("2f62"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container max-w-full md:max-w-5xl flex flex-col justify-center items-center pt-2 px-2",on:{onscroll:function(e){t.console.log(e)}}},[t._l(t.upcomingReservations,function(e){return s("timeline-block",{key:e.reservation.id,attrs:{title:t._f("date")(e.reservation.startDate)}},[s("upcoming-reservation",{attrs:{reservation:e.reservation}}),e.spacer?s("div",{staticClass:"spacer flex flex-col my-4"},[s("span",{staticClass:"py-2"},[s("i",{staticClass:"fas fa-circle"})]),s("span",{staticClass:"py-2"},[s("i",{staticClass:"fas fa-circle"})]),s("span",{staticClass:"py-2"},[s("i",{staticClass:"fas fa-circle"})])]):t._e()],1)}),s("timeline-block",{ref:"todayBlock",attrs:{title:"Today"}},[t.todaysReservation?s("upcoming-reservation",{attrs:{reservation:t.todaysReservation}}):s("div",{staticClass:"text-md text-gray-800"},[s("span",{staticClass:"icon pr-2"},[s("i",{staticClass:"far fa-frown"})]),t._v("No reservation today")])],1),t._l(t.completedReservations,function(e){return s("timeline-block",{key:e.reservation.id,attrs:{title:t._f("date")(e.reservation.startDate)}},[s("upcoming-reservation",{attrs:{reservation:e.reservation}}),e.spacer?s("div",{staticClass:"spacer flex flex-col my-4"},[s("span",{staticClass:"py-2"},[s("i",{staticClass:"fas fa-circle"})]),s("span",{staticClass:"py-2"},[s("i",{staticClass:"fas fa-circle"})]),s("span",{staticClass:"py-2"},[s("i",{staticClass:"fas fa-circle"})])]):t._e()],1)}),s("button",{staticClass:"btn-reset bg-white border border-gray-800 text-gray-800",on:{click:t.resetView}},[t._m(0)])],2)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fas fa-arrow-up"})])}],o=s("c1df"),c=s("eec9"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"timeline-section min-w-full flex flex-col items-center"},[s("div",{staticClass:"timeline-divider w-full flex flex-row items-center my-4"},[s("span",{staticClass:"w-full h-1 border-b border-gray-600 flex-grow pt-1"}),s("span",{staticClass:"timeline-title text-gray-700 text-md px-4"},[t._v(t._s(t.title))]),s("span",{staticClass:"w-full h-1 border-b border-gray-600 flex-grow pt-1"})]),t._t("default")],2)},f=[],m={name:"TimelineBlock",props:{title:{type:String,required:!0}}},v=m,u=s("2877"),p=Object(u["a"])(v,d,f,!1,null,null,null),_=p.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.reservation?s("div",{staticClass:"upcoming-reservation max-w-md w-full mx-2 md:mx-0",on:{click:function(e){t.detailed=!t.detailed}}},[s("div",{staticClass:"rounded border border-gray-400 bg-white rounded-b p-4 flex flex-col justify-between leading-normal"},[s("div",{staticClass:"mb-2"},[s("div",{staticClass:"text-sm text-gray-600 flex items-center"},[s("p",{staticClass:"text-gray-800 font-semibold text-xl"},[t._v(t._s(t.reservation.holdingName))]),s("div",{staticClass:"ml-auto"},[t.hasLogo?s("img",{staticClass:"w-24",attrs:{src:t.source_logo_urls[t.reservation.source],alt:""}}):s("span",{staticClass:"icon pr-2"},[s("img",{attrs:{src:t.source_logo_urls[t.reservation.source],alt:""}}),s("i",{staticClass:"fas fa-certificate"}),t._v("\n            "+t._s(t.reservation.source)+"\n          ")])])])]),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex flex-col text-sm text-gray-800 font-semibold"},[s("p",[s("span",{staticClass:"pr-2"},[t._v(t._s(t.reservation.people))]),s("span",[t._v(t._s(t._f("pluralize")("Guest",t.reservation.people)))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.detailed,expression:"detailed"}],staticClass:"text-sm text-gray-800 font-semibold"},[s("span",{staticClass:"pr-2"},[t._v(t._s(t.days))]),s("span",[t._v(t._s(t._f("pluralize")("Day",t.days)))])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.detailed,expression:"!detailed"}],staticClass:"flex flex-col ml-auto"},[s("div",{staticClass:"text-sm text-gray-800 font-semibold"},[s("span",{staticClass:"pr-2"},[t._v(t._s(t.days))]),s("span",[t._v(t._s(t._f("pluralize")("Day",t.days)))])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.detailed,expression:"detailed"}],staticClass:"flex flex-col text-right ml-auto"},[t.reservation.adults>0?s("div",{staticClass:"pl-2 text-sm text-gray-700 font-semibold"},[s("span",{staticClass:"pr-2"},[t._v(t._s(t.reservation.adults))]),s("span",[t._v(t._s(t._f("pluralize")("Adult",t.reservation.adults)))])]):t._e(),t.reservation.children>0?s("div",{staticClass:"pl-2 text-sm text-gray-700 font-semibold"},[s("span",{staticClass:"pr-2"},[t._v(t._s(t.reservation.children))]),s("span",[t._v(t._s(t._f("pluralize")("Child",t.reservation.children)))])]):t._e(),t.reservation.infants>0?s("div",{staticClass:"pl-2 text-sm text-gray-700 font-semibold"},[s("span",{staticClass:"pr-2"},[t._v(t._s(t.reservation.infants))]),s("span",[t._v(t._s(t._f("pluralize")("Infant",t.reservation.infants)))])]):t._e()])]),t.detailed?s("div",{staticClass:"flex items-center mt-4"}):t._e(),t.detailed?s("div",{staticClass:"flex items-center mt-2"},[t._m(0),s("span",{staticClass:"text-gray-800 font-semibold text-md self-end"},[t._v("\n        "+t._s(t._f("money")(t.reservation.earnings,t.reservation.currency))+"\n      ")]),t._m(1),s("div",{staticClass:"text-sm text-gray-700 font-semibold mr-2"},[s("p",{staticClass:"text-right pr-1"},[t._v("Check-in")]),s("p",{staticClass:"font-normal"},[t._v(t._s(t._f("date")(t.reservation.startDate)))])]),t._m(2),s("div",{staticClass:"text-sm text-gray-700 font-semibold"},[s("p",{staticClass:"text-right pr-1"},[t._v("Check-out")]),s("p",{staticClass:"font-normal"},[t._v(t._s(t._f("date")(t.reservation.endDate)))])])]):t._e()])]):t._e()},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-gray-700 self-end text-sm pr-2"},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fas fa-money-bill"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ml-auto text-gray-700 self-end text-sm pr-2"},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fas fa-calendar-alt"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-gray-700 self-end text-sm pl-2 pr-2"},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fas fa-calendar-alt"})])])}],C={name:"UpcomingReservation",mixins:[c["a"]],props:{reservation:{type:void 0|Object,required:!0}},data(){return{detailed:!1,source_logo_urls:{Booking:"/img/logos/booking_logo.png",Airbnb:"/img/logos/airbnb_logo.png"}}},computed:{days(){return this.reservation?o(this.reservation.endDate).diff(o(this.reservation.startDate),"days"):0},hasLogo(){return!!this.reservation&&void 0!==this.source_logo_urls[this.reservation.source]}}},y=C,h=(s("6f61"),Object(u["a"])(y,x,g,!1,null,"9c7b50aa",null)),b=h.exports,w={name:"UpcomingTimeline",components:{TimelineBlock:_,UpcomingReservation:b},mixins:[c["a"]],data(){return{today:new Date,blocks:[]}},computed:{...Object(r["e"])({reservations:t=>t.apartment.reservations}),todaysReservation(){let t=this.reservations.find(t=>o(t.startDate).isSameOrBefore(this.today,"day")&&o(t.endDate).isAfter(this.today,"day"))||null;return t},upcomingReservations(){return this.blocks.filter(t=>o(t.reservation.startDate).isAfter(this.today,"day"))},completedReservations(){return this.blocks.filter(t=>o(t.reservation.endDate).isBefore(this.today,"day"))}},watch:{reservations:{immediate:!0,handler:function(t){let e=[...t];e.sort((t,e)=>new Date(t.startDate).valueOf()>new Date(e.startDate).valueOf());let s=[],a=null;for(let i of e){let t={reservation:i,spacer:!0};o(a).isSame(i.startDate,"day")&&(t.spacer=!1),s.push(t),a=i.endDate}s.reverse(),this.blocks=s,this.$nextTick(this.resetView,500)}}},methods:{resetView(){this.$refs.todayBlock.$el.scrollIntoView()}}},k=w,D=(s("f862"),Object(u["a"])(k,n,l,!1,null,null,null)),R=D.exports,$={name:"UpcomingView",components:{UpcomingTimeline:R},computed:{...Object(r["e"])({activeApartment:t=>t.global.activeApartment})},watch:{activeApartment:{immediate:!0,handler:function(t){t&&this.getReservations(t.id)}}},methods:{...Object(r["b"])({getReservations:"apartment/getReservations"})}},j=$,O=Object(u["a"])(j,a,i,!1,null,null,null);e["default"]=O.exports},"6d792":function(t,e,s){},"6f61":function(t,e,s){"use strict";var a=s("c9bf"),i=s.n(a);i.a},c9bf:function(t,e,s){},eec9:function(t,e,s){"use strict";var a=s("c1df");const i={child:"ren"};e["a"]={filters:{money:function(t,e){let s=t.toLocaleString("hr-HR",{style:"currency",currency:e});return s},moneyShort:function(t,e){let s=t>=1e6?"M":t>=1e3?"K":null;"M"==s&&(t/=1e6),"K"==s&&(t/=1e3);let a=t.toLocaleString("hr-HR",{style:"decimal",maximumFractionDigits:1,minimumFractionDigits:1});return s&&(a=`${a} ${s} ${e}`),a},date:function(t){return a(t).format("DD.MM.YYYY.")},pluralize:function(t,e){let s=i[t.toLowerCase()]||"s";return e>1?t+s:t}}}},f862:function(t,e,s){"use strict";var a=s("6d792"),i=s.n(a);i.a}}]);
//# sourceMappingURL=UpcomingView.js.map