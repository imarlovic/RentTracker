(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AppView"],{"35e1":function(t,e,a){"use strict";var s=a("e305"),i=a.n(s);i.a},"56ae":function(t,e,a){},7068:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-view"},[a("navigation-bar"),a("div",{staticClass:"content-view"},[a("router-view")],1)],1)},i=[],n=a("632a"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar flex items-center justify-start flex-wrap bg-blue-600 p-0 shadow-lg xl:h-auto"},[a("div",{staticClass:"flex items-center flex-no-shrink text-white mr-6"},[a("button",{staticClass:"nav-link text-xl px-4 xl:hidden",on:{click:t.toggleDrawer}},[t._m(0)]),t._l(t.links,function(e){return a("router-link",{key:e.path,staticClass:"hidden xl:block nav-link",attrs:{to:e.path}},[a("span",{staticClass:"icon"},[a("i",{class:e.icon})]),a("span",{staticClass:"description"},[t._v(t._s(e.label))])])})],2),a("div",{staticClass:"h-12 flex items-center text-white ml-auto pr-4 xl:pr-0"},[t.activeApartment?a("p",{staticClass:"font-semibold"},[t._v(t._s(t.activeApartment.name))]):t._e(),t._m(1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.drawerOpen,expression:"drawerOpen"}],staticClass:"drawer min-h-screen w-full fixed top-0 left-0 flex flex-col justify-center items-center bg-blue-600"},[a("div",{staticClass:"absolute top-0 text-2xl font-semibold tracking-widest text-white p-4"},[t._v("\n      RentTracker\n    ")]),t._l(t.links,function(e){return a("router-link",{key:e.path,staticClass:"drawer-link w-full flex justify-center items-center py-4",attrs:{to:e.path},nativeOn:{click:function(e){return t.toggleDrawer(e)}}},[a("i",{staticClass:"w-5/12 text-right pr-6 flex-grow",class:e.icon}),a("span",{staticClass:"w-7/12"},[t._v(t._s(e.label))])])}),t._m(2)],2)])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-bars"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"nav-link hidden xl:block ml-4 px-4 text-md font-semibold",attrs:{href:"/auth/sign-out"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-sign-out-alt"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col items-center text-white absolute bottom-0"},[a("a",{staticClass:"p-4 font-semibold",attrs:{href:"/auth/sign-out"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-sign-out-alt"})]),t._v(" Sign out")])])}],o=a("2f62"),c={name:"NavigationBar",data(){return{drawerOpen:!1,links:[{path:"/upcoming",label:"Upcoming",icon:"fas fa-stream"},{path:"/apartments",label:"Apartments",icon:"fas fa-hotel"},{path:"/calendar",label:"Calendar",icon:"fas fa-calendar"},{path:"/expenses",label:"Expenses",icon:"fas fa-file-invoice-dollar"},{path:"/integrations",label:"Integrations",icon:"fas fa-layer-group"},{path:"/business-analysis",label:"Statistics",icon:"fas fa-chart-line"}]}},computed:{...Object(o["e"])({activeApartment:t=>t.global.activeApartment})},methods:{toggleDrawer(){this.drawerOpen=!this.drawerOpen}}},u=c,p=(a("f343"),a("2877")),f=Object(p["a"])(u,r,l,!1,null,"af5b1528",null),h=f.exports,d={name:"AppView",components:{NavigationBar:h},mounted(){"serviceWorker"in navigator&&"PushManager"in window&&this.subscribeForPushNotifications()},methods:{urlB64ToUint8Array(t){const e="=".repeat((4-t.length%4)%4),a=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(a),i=new Uint8Array(s.length);for(let n=0;n<s.length;++n)i[n]=s.charCodeAt(n);return i},async subscribeForPushNotifications(){const t=await navigator.serviceWorker.ready;if(!t)return;const e=await Notification.requestPermission();if("granted"!=e)return;let a=await t.pushManager.getSubscription();if(!a){let e=await n["a"].getPublicKey();if(console.log(e),!e)return void console.log("Failed to retrieve application server public key");try{const a=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlB64ToUint8Array(e)});let i=a.toJSON(),r={endpoint:a.endpoint,p256dh:i.keys.p256dh,auth:i.keys.auth};await n["a"].subscribe(r)}catch(s){console.log("Failed to subscribe the user for push notifications",s)}}}}},b=d,v=(a("35e1"),Object(p["a"])(b,s,i,!1,null,"3c0ee392",null));e["default"]=v.exports},e305:function(t,e,a){},f343:function(t,e,a){"use strict";var s=a("56ae"),i=a.n(s);i.a}}]);
//# sourceMappingURL=AppView.js.map