(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ApartmentsView"],{"0942":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field"},[t.label?a("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),t._t("default")],2)},n=[],i={name:"RField",inheritAttrs:!0,props:{label:{type:String,default:null}}},l=i,r=a("2877"),c=Object(r["a"])(l,s,n,!1,null,null,null);e["a"]=c.exports},"14aa":function(t,e,a){},"2ab7":function(t,e,a){"use strict";var s=a("8c9c"),n=a.n(s);n.a},"5b7c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.active?a("div",{staticClass:"modal-container fixed top-0 right-0 w-screen h-screen overflow-auto flex flex-col justify-center items-center"},[a("div",{staticClass:"modal-backdrop absolute top-0 right-0 w-screen h-screen bg-gray-700 opacity-75",on:{click:t.close}}),a("div",{staticClass:"modal-content max-w-full h-full md:h-auto flex flex-col bg-white rounded shadow-lg",class:t.contentClass},[a("div",{staticClass:"modal-header"},[t._t("header")],2),a("div",{staticClass:"modal-body flex-grow md:flex-grow-0"},[t._t("default")],2),a("div",{staticClass:"modal-footer"},[t._t("footer")],2)])]):t._e()},n=[],i={name:"RModal",props:{active:{type:Boolean,required:!0},size:{type:String,default:"md"}},computed:{contentClass(){let t=[];switch(this.size){case"md":t.push("modal-size-md")}return t.join(" ")}},methods:{close(){this.$emit("close")}}},l=i,r=(a("b11f"),a("2877")),c=Object(r["a"])(l,s,n,!1,null,"6b5ed9fd",null);e["a"]=c.exports},6919:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-full flex flex-col p-4 flex-grow"},[a("div",{staticClass:"flex flex-wrap items-center"},t._l(t.apartments,function(e){return a("apartment-card",{key:e.id,attrs:{apartment:e},on:{"apartment:edit":t.editApartment}})}),1),a("div",{staticClass:"mt-auto flex justify-center px-2"},[a("r-field",[a("button",{staticClass:"btn btn-outline-primary",on:{click:t.newApartment}},[a("span",{staticClass:"icon pr-2"},[a("i",{staticClass:"fas fa-plus"})]),t._v("New apartment")])])],1),a("apartment-form",{attrs:{visible:t.showForm,apartment:t.selectedApartment},on:{close:t.closeForm,"apartment:saved":t.apartmentSaved}})],1)},n=[],i=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apartment-card w-full sm:max-w-sm cursor-pointer flex p-4",class:{active:t.isActive}},[a("div",{staticClass:"card-body w-full relative rounded overflow-hidden shadow-lg hover:shadow-xl"},[a("img",{staticClass:"w-full",attrs:{src:t.apartment.headerUrl,alt:"Sunset in the mountains"},on:{click:function(e){return t.selectApartment(t.apartment)}}}),a("div",{staticClass:"py-2 px-4 pb-0"},[a("div",{staticClass:"font-bold text-xl mb-2 text-gray-700"},[t._v(t._s(t.apartment.name))])]),a("div",{staticClass:"flex justify-start items-center pl-4 pr-2 py-2"},[t.isActive?t._e():a("button",{staticClass:"btn btn-primary size-sm mr-2",on:{click:function(e){return t.selectApartment(t.apartment)}}},[t._m(0),t._v("Select")]),a("button",{staticClass:"btn btn-outline-secondary size-sm ml-auto",on:{click:function(e){return t.openApartment(t.apartment)}}},[a("i",{staticClass:"fas fa-pen"})])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon pr-2"},[a("i",{staticClass:"fas fa-map-marker-alt"})])}],c={name:"ApartmentCard",props:{apartment:{type:Object,required:!0}},computed:{...Object(i["e"])({activeApartment:t=>t.global.activeApartment}),isActive(){return this.activeApartment&&this.activeApartment.id===this.apartment.id}},methods:{...Object(i["d"])({setActiveApartment:"global/setActiveApartment"}),openApartment(t){this.$emit("apartment:edit",t)},selectApartment(t){this.setActiveApartment(t),this.$router.push("/calendar")}}},o=c,m=(a("ce18"),a("2877")),p=Object(m["a"])(o,l,r,!1,null,"907e493e",null),u=p.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("r-modal",{attrs:{active:t.visible},on:{close:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[a("p",{staticClass:"ml-6 my-3 font-bold  text-xl text-gray-700"},[t._v(t._s(t.title))])]},proxy:!0},{key:"default",fn:function(){return[t.formData?a("div",{staticClass:"m-6 flex flex-row flex-wrap align-center justify-between"},[a("div",{staticClass:"w-full"},[a("r-field",{attrs:{label:"Name"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}})]),a("r-field",{attrs:{label:"Header Image"}},[a("file-input",{model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1)],1)]):t._e()]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"m-3 flex flex-row justify-end items-center"},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.submitting},on:{click:t.submit}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-save"})]),t._v(" Save")]),a("button",{staticClass:"btn btn-outline-secondary ml-auto",on:{click:t.close}},[t._v("Cancel")])])]},proxy:!0}])})},f=[],h=a("bc3a"),b=a.n(h),v=a("0942"),g=a("d2d0"),w=a("5b7c"),x={name:"ApartmentForm",components:{RField:v["a"],FileInput:g["a"],RModal:w["a"]},props:{visible:{type:Boolean,required:!0},apartment:{type:Object,default:null}},data(){return{submitting:!1,formData:null,image:null}},computed:{title(){return this.apartment?this.apartment.name:"New apartment"}},watch:{apartment:{immediate:!0,handler:function(t){this.formData=t?{...t}:{name:""},this.image=null}}},methods:{...Object(i["b"])({createOrUpdateApartment:"apartment/createOrUpdateApartment"}),close(){this.$emit("close")},imageSelected(t){this.image=t.target.files[0]},async submit(){try{if(this.submitting=!0,this.image){let t=new FormData;if(t.append("image",this.image),this.formData.headerId)await b.a.put(`/api/img/${this.formData.headerId}`,t,{headers:{"Content-Type":"multipart/form-data"}});else{let e=await b.a.post("/api/img",t,{headers:{"Content-Type":"multipart/form-data"}});this.formData.headerId=e.data.id}}let e=await this.createOrUpdateApartment(this.formData);this.$emit("apartment:saved",e)}catch(t){}finally{this.submitting=!1}}}},C=x,A=Object(m["a"])(C,d,f,!1,null,null,null),y=A.exports,_={name:"ApartmentsView",components:{RField:v["a"],ApartmentCard:u,ApartmentForm:y},mounted(){this.getApartments()},data(){return{selectedApartment:null,showForm:!1}},computed:{...Object(i["e"])({apartments:t=>t.global.apartments})},methods:{...Object(i["b"])({getApartments:"global/getApartments"}),closeForm(){this.showForm=!1,this.selectedApartment=null},newApartment(){this.selectedApartment=null,this.showForm=!0},editApartment(t){this.selectedApartment=t,this.showForm=!0},apartmentSaved(t){this.selectedApartment=null,this.showForm=!1,this.getApartments()}}},j=_,k=(a("9a5b"),Object(m["a"])(j,s,n,!1,null,"bc5cc9ca",null));e["default"]=k.exports},"8c9c":function(t,e,a){},"9a5b":function(t,e,a){"use strict";var s=a("a06a"),n=a.n(s);n.a},a06a:function(t,e,a){},b11f:function(t,e,a){"use strict";var s=a("14aa"),n=a.n(s);n.a},cae6:function(t,e,a){},ce18:function(t,e,a){"use strict";var s=a("cae6"),n=a.n(s);n.a},d2d0:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"file input"},[a("label",{staticClass:"text-lg"},[t._m(0),t._v("\n    "+t._s(this.file?this.file.name:"Choose a file...")+"\n  ")]),a("input",{attrs:{type:"file"},on:{change:t.fileSelected}})])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon pr-4"},[a("i",{staticClass:"fas fa-file-upload"})])}],i={name:"FileInput",inheritAttrs:!0,props:{value:{type:File,default:null}},data(){return{file:null}},methods:{fileSelected(t){this.file=t.target.files[0],console.log(this.file),this.$emit("input",this.file)}}},l=i,r=(a("2ab7"),a("2877")),c=Object(r["a"])(l,s,n,!1,null,"6edae47d",null);e["a"]=c.exports}}]);
//# sourceMappingURL=ApartmentsView.js.map