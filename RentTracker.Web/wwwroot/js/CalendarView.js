(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CalendarView"],{"007d":function(t,e,a){},"0390":function(t,e,a){"use strict";var n=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},"0429":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-wrap flex-row items-end"},[a("r-field",{attrs:{label:"Year"}},[a("r-select",{model:{value:t.year,callback:function(e){t.year=e},expression:"year"}},[a("option",{domProps:{value:2020}},[t._v("2020")]),a("option",{domProps:{value:2019}},[t._v("2019")]),a("option",{domProps:{value:2018}},[t._v("2018")]),a("option",{domProps:{value:2017}},[t._v("2017")])])],1),a("r-field",{attrs:{label:"Month"}},[a("r-select",{model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},[a("option",{domProps:{value:0}},[t._v("1")]),a("option",{domProps:{value:1}},[t._v("2")]),a("option",{domProps:{value:2}},[t._v("3")]),a("option",{domProps:{value:3}},[t._v("4")]),a("option",{domProps:{value:4}},[t._v("5")]),a("option",{domProps:{value:5}},[t._v("6")]),a("option",{domProps:{value:6}},[t._v("7")]),a("option",{domProps:{value:7}},[t._v("8")]),a("option",{domProps:{value:8}},[t._v("9")]),a("option",{domProps:{value:9}},[t._v("10")]),a("option",{domProps:{value:10}},[t._v("11")]),a("option",{domProps:{value:11}},[t._v("12")])])],1),a("r-field",[a("button",{staticClass:"btn mr-0 border-r-0 rounded-r-none",on:{click:t.previousMonth}},[a("i",{staticClass:"fas fa-angle-left"})]),a("button",{staticClass:"btn ml-0 border-l-0 rounded-l-none",on:{click:t.nextMonth}},[a("i",{staticClass:"fas fa-angle-right"})])]),a("r-field",[a("button",{staticClass:"btn",on:{click:t.reset}},[t._v("Today")])])],1)},r=[],i=a("0942"),s=a("8fb6"),o={name:"MonthSelector",components:{RField:i["a"],RSelect:s["a"]},props:{value:{type:Date,default:new Date}},data:function(){return{year:this.value.getFullYear(),month:this.value.getMonth()}},watch:{year:function(t){this.$emit("input",new Date(t,this.month,1))},month:function(t){this.$emit("input",new Date(this.year,t,1))}},methods:{previousMonth:function(){this.month-1<0?(this.year--,this.month=11):this.month--},nextMonth:function(){this.month+1>11?(this.year++,this.month=0):this.month++},reset:function(){var t=new Date;this.year=t.getFullYear(),this.month=t.getMonth()}}},l=o,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);e["a"]=u.exports},1206:function(t,e,a){"use strict";var n=a("4941"),r=a.n(n);r.a},"14aa":function(t,e,a){},"214f":function(t,e,a){"use strict";a("b0c5");var n=a("2aba"),r=a("32e9"),i=a("79e5"),s=a("be13"),o=a("2b4c"),l=a("520a"),c=o("species"),u=!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();t.exports=function(t,e,a){var f=o(t),m=!i(function(){var e={};return e[f]=function(){return 7},7!=""[t](e)}),p=m?!i(function(){var e=!1,a=/a/;return a.exec=function(){return e=!0,null},"split"===t&&(a.constructor={},a.constructor[c]=function(){return a}),a[f](""),!e}):void 0;if(!m||!p||"replace"===t&&!u||"split"===t&&!d){var v=/./[f],h=a(s,f,""[t],function(t,e,a,n,r){return e.exec===l?m&&!r?{done:!0,value:v.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}}),g=h[0],y=h[1];n(String.prototype,t,g),r(RegExp.prototype,f,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},"28a5":function(t,e,a){"use strict";var n=a("aae3"),r=a("cb7c"),i=a("ebd6"),s=a("0390"),o=a("9def"),l=a("5f1b"),c=a("520a"),u=a("79e5"),d=Math.min,f=[].push,m="split",p="length",v="lastIndex",h=4294967295,g=!u(function(){RegExp(h,"y")});a("214f")("split",2,function(t,e,a,u){var y;return y="c"=="abbc"[m](/(b)*/)[1]||4!="test"[m](/(?:)/,-1)[p]||2!="ab"[m](/(?:ab)*/)[p]||4!="."[m](/(.?)(.?)/)[p]||"."[m](/()()/)[p]>1||""[m](/.?/)[p]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!n(t))return a.call(r,t,e);var i,s,o,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,m=void 0===e?h:e>>>0,g=new RegExp(t.source,u+"g");while(i=c.call(g,r)){if(s=g[v],s>d&&(l.push(r.slice(d,i.index)),i[p]>1&&i.index<r[p]&&f.apply(l,i.slice(1)),o=i[0][p],d=s,l[p]>=m))break;g[v]===i.index&&g[v]++}return d===r[p]?!o&&g.test("")||l.push(""):l.push(r.slice(d)),l[p]>m?l.slice(0,m):l}:"0"[m](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,n){var r=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,r,n):y.call(String(r),a,n)},function(t,e){var n=u(y,t,this,e,y!==a);if(n.done)return n.value;var c=r(t),f=String(this),m=i(c,RegExp),p=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),b=new m(g?c:"^(?:"+c.source+")",v),x=void 0===e?h:e>>>0;if(0===x)return[];if(0===f.length)return null===l(b,f)?[f]:[];var C=0,k=0,w=[];while(k<f.length){b.lastIndex=g?k:0;var D,R=l(b,g?f:f.slice(k));if(null===R||(D=d(o(b.lastIndex+(g?0:k)),f.length))===C)k=s(f,k,p);else{if(w.push(f.slice(C,k)),w.length===x)return w;for(var _=1;_<=R.length-1;_++)if(w.push(R[_]),w.length===x)return w;k=C=D}}return w.push(f.slice(C)),w}]})},"36ff":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isLoading?a("loading-indicator"):a("div",{staticClass:"max-w-5xl w-full flex flex-col justify-center items-center pt-4 md:pt-8 xl:px-4"},[a("div",{staticClass:"container flex pb-4 mb-4 px-2"},[a("p",{staticClass:"text-gray-700 text-2xl"},[t._v("Linked calendars")]),a("router-link",{staticClass:"btn-link h-8 ml-auto",attrs:{to:"/calendar"}},[t._v("Calendar")])],1),a("div",{staticClass:"container flex justify-start items-end"},[a("button",{staticClass:"text-gray-600 ml-1 mr-0 hover:text-gray-800",on:{click:t.createLinkedCalendar}},[a("i",{staticClass:"pr-2 fas fa-plus"}),t._v("New Linked Calendar")]),a("button",{staticClass:"text-gray-600 ml-auto mr-0 hover:text-gray-800",class:{rotate:t.isLoading},on:{click:t.getLinkedCalendars}},[a("i",{staticClass:"pr-4 fas fa-sync"})])]),t.linkedCalendars.length>0?a("div",{staticClass:"min-w-full container mt-4"},t._l(t.linkedCalendars,function(e){return a("div",{key:e.id,staticClass:"w-full flex items-center h-20 md:h-12 px-4 mb-2 rounded bg-gray-200 shadow-md text-xs md:text-sm xl:text-md"},[a("div",{staticClass:"md:w-full flex flex-col md:flex-row  items-start justify-end"},[a("span",{staticClass:"block font-semibold text-gray-800"},[t._v(t._s(e.name))]),a("span",{staticClass:"ml-auto md:px-2 pr-4 text-xs text-gray-700"},[t._v("Last updated: "+t._s(t._f("timeSince")(e.lastUpdated)))])]),a("div",{staticClass:"flex ml-auto md:ml-0"},[a("button",{staticClass:"w-6 h-full text-xs text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Edit"},on:{click:function(a){return t.editLinkedCalendar(e)}}},[a("i",{staticClass:"fas fa-pen"})]),a("button",{staticClass:"w-6 h-full text-xs text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Delete"},on:{click:function(a){return t.tryDeleteLinkedCalendar(e)}}},[a("i",{staticClass:"fas fa-trash"})]),a("button"),a("button",{staticClass:"w-6 h-full text-xs text-gray-600 ml-4 hover:text-gray-800",class:{rotate:t.syncing.includes(e.id)},attrs:{title:"Sync reservations",disabled:t.syncing.includes(e.id)},on:{click:function(a){return t.trySyncLinkedCalendar(e)}}},[a("i",{staticClass:"fas fa-sync"})]),a("button")])])}),0):t._e(),0==t.linkedCalendars.length?a("div",{staticClass:"container flex justify-center mt-16"},[a("p",{staticClass:"text-xl text-gray-600"},[a("span",{staticClass:"icon pr-2"},[a("i",{staticClass:"fas fa-frown"})]),t._v(" No linked calendars found")])]):t._e(),a("linked-calendar-form",{attrs:{visible:t.showLinkedCalendarForm,"linked-calendar":t.selectedLinkedCalendar},on:{close:t.closeLinkedCalendarForm}})],1)},r=[],i=(a("96cf"),a("3b8d")),s=a("bd86"),o=a("cebc"),l=a("0942"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("r-modal",{attrs:{active:t.visible},on:{close:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[a("p",{staticClass:"ml-6 my-3 font-bold  text-xl text-gray-700"},[t._v(t._s(t.title))])]},proxy:!0},{key:"default",fn:function(){return[t.formData?a("div",{staticClass:"m-6 flex flex-row flex-wrap align-center justify-between"},[a("div",{staticClass:"w-full"},[a("r-field",{attrs:{label:"Name"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}})]),a("r-field",{attrs:{label:"Url"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.url,expression:"formData.url"}],staticClass:"input",attrs:{type:"text",placeholder:"Url"},domProps:{value:t.formData.url},on:{input:function(e){e.target.composing||t.$set(t.formData,"url",e.target.value)}}})])],1)]):t._e()]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"m-3 flex flex-row justify-end items-center"},[a("button",{staticClass:"btn btn-primary",on:{click:t.trySave}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-save"})]),t._v(" Save")]),a("button",{staticClass:"btn btn-outline-secondary ml-auto",on:{click:t.close}},[t._v("Cancel")])])]},proxy:!0}])})},u=[],d=(a("7f7f"),a("5b7c")),f=a("2f62"),m={name:"LinkedCalendarForm",components:{RField:l["a"],RModal:d["a"]},props:{visible:{type:Boolean,required:!0},linkedCalendar:{type:Object,default:null}},data:function(){return{formData:null}},computed:{title:function(){return this.linkedCalendar?this.linkedCalendar.name:"New linked calendar"}},watch:{linkedCalendar:{immediate:!0,handler:function(t){this.formData=t?Object(o["a"])({},t):{name:"",url:""}}}},methods:Object(o["a"])({},Object(f["b"])({createOrUpdate:"apartment/createOrUpdateLinkedCalendar"}),{close:function(){this.$emit("close")},trySave:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.createOrUpdate(this.formData);case 3:this.close(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}));function e(){return t.apply(this,arguments)}return e}()})},p=m,v=a("2877"),h=Object(v["a"])(p,c,u,!1,null,null,null),g=h.exports,y=a("a4a1"),b=a("eec9"),x={name:"LinkedCalendars",mounted:function(){this.getLinkedCalendars()},mixins:[b["a"]],components:{RField:l["a"],LoadingIndicator:y["a"],LinkedCalendarForm:g},data:function(){return{syncing:[],showLinkedCalendarForm:!1,selectedLinkedCalendar:null}},computed:Object(o["a"])({},Object(f["e"])({isLoading:function(t){return t.apartment.status.linkedCalendar.loading},linkedCalendars:function(t){return t.apartment.linkedCalendars}})),methods:Object(o["a"])({},Object(f["b"])(Object(s["a"])({getLinkedCalendars:"apartment/getLinkedCalendars",deleteLinkedCalendar:"apartment/deleteLinkedCalendar",syncLinkedCalendar:"apartment/syncLinkedCalendar"},"getLinkedCalendars","apartment/getLinkedCalendars")),{createLinkedCalendar:function(){this.selectedLinkedCalendar=null,this.showLinkedCalendarForm=!0},editLinkedCalendar:function(t){this.selectedLinkedCalendar=t,this.showLinkedCalendarForm=!0},tryDeleteLinkedCalendar:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.deleteLinkedCalendar(e.id);case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),trySyncLinkedCalendar:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.syncing.push(e.id),t.next=4,this.syncLinkedCalendar(e.id);case 4:return t.next=6,this.getLinkedCalendars();case 6:return t.prev=6,this.syncing=this.syncing.filter(function(t){return t!==e.id}),t.finish(6);case 9:case"end":return t.stop()}},t,this,[[0,,6,9]])}));function e(e){return t.apply(this,arguments)}return e}(),closeLinkedCalendarForm:function(){this.selectedLinkedCalendar=null,this.showLinkedCalendarForm=!1}})},C=x,k=(a("bc18"),Object(v["a"])(C,n,r,!1,null,"074fea48",null));e["default"]=k.exports},4941:function(t,e,a){},"520a":function(t,e,a){"use strict";var n=a("0bfb"),r=RegExp.prototype.exec,i=String.prototype.replace,s=r,o="lastIndex",l=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t[o]||0!==e[o]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(s=function(t){var e,a,s,u,d=this;return c&&(a=new RegExp("^"+d.source+"$(?!\\s)",n.call(d))),l&&(e=d[o]),s=r.call(d,t),l&&s&&(d[o]=d.global?s.index+s[0].length:e),c&&s&&s.length>1&&i.call(s[0],a,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)}),s}),t.exports=s},"5b7c":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.active?a("div",{staticClass:"modal-container fixed top-0 right-0 w-screen h-screen overflow-auto flex flex-col justify-center items-center"},[a("div",{staticClass:"modal-backdrop absolute top-0 right-0 w-screen h-screen bg-gray-700 opacity-75",on:{click:t.close}}),a("div",{staticClass:"modal-content max-w-full h-full md:h-auto flex flex-col bg-white rounded shadow-lg",class:t.contentClass},[a("div",{staticClass:"modal-header"},[t._t("header")],2),a("div",{staticClass:"modal-body flex-grow md:flex-grow-0"},[t._t("default")],2),a("div",{staticClass:"modal-footer"},[t._t("footer")],2)])]):t._e()},r=[],i={name:"RModal",props:{active:{type:Boolean,required:!0},size:{type:String,default:"md"}},computed:{contentClass:function(){var t=[];switch(this.size){case"md":t.push("modal-size-md")}return t.join(" ")}},methods:{close:function(){this.$emit("close")}}},s=i,o=(a("b11f"),a("2877")),l=Object(o["a"])(s,n,r,!1,null,"6b5ed9fd",null);e["a"]=l.exports},"5df3":function(t,e,a){"use strict";var n=a("02f4")(!0);a("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=n(e,a),this._i+=t.length,{value:t,done:!1})})},"5eae":function(t,e,a){},"5f1b":function(t,e,a){"use strict";var n=a("23c6"),r=RegExp.prototype.exec;t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var i=a.call(t,e);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},a481:function(t,e,a){"use strict";var n=a("cb7c"),r=a("4bf8"),i=a("9def"),s=a("4588"),o=a("0390"),l=a("5f1b"),c=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,m=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,function(t,e,a,v){return[function(n,r){var i=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,i,r):a.call(String(i),n,r)},function(t,e){var r=v(a,t,this,e);if(r.done)return r.value;var d=n(t),f=String(this),m="function"===typeof e;m||(e=String(e));var g=d.global;if(g){var y=d.unicode;d.lastIndex=0}var b=[];while(1){var x=l(d,f);if(null===x)break;if(b.push(x),!g)break;var C=String(x[0]);""===C&&(d.lastIndex=o(f,i(d.lastIndex),y))}for(var k="",w=0,D=0;D<b.length;D++){x=b[D];for(var R=String(x[0]),_=c(u(s(x.index),f.length),0),L=[],O=1;O<x.length;O++)L.push(p(x[O]));var j=x.groups;if(m){var S=[R].concat(L,_,f);void 0!==j&&S.push(j);var P=String(e.apply(void 0,S))}else P=h(R,f,_,L,j,e);_>=w&&(k+=f.slice(w,_)+P,w=_+R.length)}return k+f.slice(w)}];function h(t,e,n,i,s,o){var l=n+t.length,c=i.length,u=m;return void 0!==s&&(s=r(s),u=f),a.call(o,u,function(a,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(l);case"<":o=s[r.slice(1,-1)];break;default:var u=+r;if(0===u)return a;if(u>c){var f=d(u/10);return 0===f?a:f<=c?void 0===i[f-1]?r.charAt(1):i[f-1]+r.charAt(1):a}o=i[u-1]}return void 0===o?"":o})}})},b0c5:function(t,e,a){"use strict";var n=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},b11f:function(t,e,a){"use strict";var n=a("14aa"),r=a.n(n);r.a},bc18:function(t,e,a){"use strict";var n=a("007d"),r=a.n(n);r.a},defb:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isLoading?a("loading-indicator"):a("div",{staticClass:"max-w-5xl w-full"},[a("toolbar",[a("month-selector",{model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}}),a("r-field",[t.linkedCalendars.length>0?a("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:t.syncInProgress},on:{click:t.runSync}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-sync",class:{rotate:t.syncInProgress}})]),t._v("\n        Sync\n      ")]):t._e()]),a("r-field",{staticClass:"md:block ml-auto"},[a("router-link",{staticClass:"btn-link",attrs:{to:"/calendar/linked"}},[t._v("Linked calendars")])],1)],1),a("div",{staticClass:"flex justify-center"},[a("div",{staticClass:"container mt-4"},t._l(t.weeks,function(e){return a("div",{key:e.weekOfYear,staticClass:"week"},t._l(e.days,function(e){return a("day",{key:e.dayOfYear,attrs:{day:e},on:{"trigger:new":t.newReservation,"reservation:selected":t.openReservation}})}),1)}),0)]),a("reservation-form",{attrs:{visible:t.reservationFormVisible,reservation:t.selectedReservation,datehint:t.datehint},on:{close:t.closeReservationForm}})],1)},r=[],i=(a("ac6a"),a("5df3"),a("cebc")),s=a("2f62"),o=a("c1df"),l=a("0942"),c=a("8fc4"),u=a("0429"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("r-modal",{attrs:{active:t.visible},on:{close:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[a("p",{staticClass:"ml-6 my-3 font-bold  text-xl text-gray-700"},[t._v(t._s(t.title))])]},proxy:!0},{key:"default",fn:function(){return[t.formData?a("div",{staticClass:"flex flex-row flex-wrap align-center justify-between p-3"},[a("div",{staticClass:"w-full flex flex-wrap"},[a("r-field",{staticClass:"w-full md:w-1/2",attrs:{label:"Reservation Reference"}},[a("input",{staticClass:"input",attrs:{type:"text",placeholder:"Reservation Reference",readonly:""},domProps:{value:t.formData.reference}})]),a("r-field",{staticClass:"w-full md:w-1/2",attrs:{label:"Holding name"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.holdingName,expression:"formData.holdingName"}],staticClass:"input",attrs:{type:"text",placeholder:"Holding name"},domProps:{value:t.formData.holdingName},on:{input:function(e){e.target.composing||t.$set(t.formData,"holdingName",e.target.value)}}})])],1),a("div",{staticClass:"w-full flex flex-wrap"},[a("r-field",{staticClass:"w-full md:w-1/2",attrs:{label:"Price"}},[a("currency-input",{attrs:{placeholder:"Price",currency:t.formData.currency},model:{value:t.formData.price,callback:function(e){t.$set(t.formData,"price",e)},expression:"formData.price"}})],1),a("r-field",{staticClass:"w-full md:w-1/2",attrs:{label:"Currency"}},[a("r-select",{model:{value:t.formData.currency,callback:function(e){t.$set(t.formData,"currency",e)},expression:"formData.currency"}},[a("option",{attrs:{value:"HRK"}},[t._v("HRK")]),a("option",{attrs:{value:"EUR"}},[t._v("EUR")])])],1)],1),a("div",{staticClass:"w-full flex flex-wrap"},[a("r-field",{staticClass:"w-full md:w-1/2",attrs:{label:"Source"}},[a("input",{staticClass:"input",attrs:{type:"text",placeholder:"Source",readonly:""},domProps:{value:t.formData.source}})]),a("r-field",{staticClass:"w-full md:w-1/2",attrs:{label:"Country"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.country,expression:"formData.country"}],staticClass:"input",attrs:{type:"text",placeholder:"Country"},domProps:{value:t.formData.country},on:{input:function(e){e.target.composing||t.$set(t.formData,"country",e.target.value)}}})])],1),a("div",{staticClass:"w-full flex flex-wrap mt-4"},[a("r-field",{staticClass:"w-full md:w-1/3",attrs:{label:"Adults"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.adults,expression:"formData.adults"}],staticClass:"input",attrs:{type:"number",step:"1",min:"0",placeholder:"Adults"},domProps:{value:t.formData.adults},on:{input:function(e){e.target.composing||t.$set(t.formData,"adults",e.target.value)}}})]),a("r-field",{staticClass:"w-full md:w-1/3",attrs:{label:"Children"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.children,expression:"formData.children"}],staticClass:"input",attrs:{type:"number",step:"1",min:"0",placeholder:"Children"},domProps:{value:t.formData.children},on:{input:function(e){e.target.composing||t.$set(t.formData,"children",e.target.value)}}})]),a("r-field",{staticClass:"w-full md:w-1/3",attrs:{label:"Infants"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.infants,expression:"formData.infants"}],staticClass:"input",attrs:{type:"number",step:"1",min:"0",placeholder:"Infants"},domProps:{value:t.formData.infants},on:{input:function(e){e.target.composing||t.$set(t.formData,"infants",e.target.value)}}})])],1),a("div",{staticClass:"w-full flex justify-between mt-4"},[a("r-field",{staticClass:"w-2/5",attrs:{label:"Check-in"}},[a("date-input",{staticClass:"input",attrs:{type:"date",max:t.maxStartingDate,placeholder:"Check-in"},model:{value:t.formData.startDate,callback:function(e){t.$set(t.formData,"startDate",e)},expression:"formData.startDate"}})],1),a("r-field",{staticClass:"w-2/5",attrs:{label:"Check-out"}},[a("date-input",{staticClass:"input",attrs:{type:"date",min:t.minEndingDate,placeholder:"Check-out"},model:{value:t.formData.endDate,callback:function(e){t.$set(t.formData,"endDate",e)},expression:"formData.endDate"}})],1),a("r-field",{staticClass:"w-1/5",attrs:{label:"Days"}},[a("input",{staticClass:"input",attrs:{type:"text",placeholder:"Days",readonly:""},domProps:{value:t.days}})])],1)]):t._e()]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"m-3 flex flex-row justify-end items-center"},[a("button",{staticClass:"btn btn-primary",on:{click:t.trySave}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-save"})]),t._v(" Save")]),a("div",{staticClass:"flex ml-auto"},[a("button",{staticClass:"btn btn-outline-secondary mx-1",on:{click:t.close}},[t._v("Cancel")]),t.deleteAllowed?a("button",{staticClass:"btn btn-outline-danger mx-1",on:{click:t.tryDelete}},[a("i",{staticClass:"fas fa-trash"})]):t._e()])])]},proxy:!0}])})},f=[],m=(a("96cf"),a("3b8d")),p=a("8fb6"),v=a("5b7c"),h=a("7a3f"),g=a("df33"),y=a("eec9"),b={name:"ReservationForm",components:{RField:l["a"],RSelect:p["a"],RModal:v["a"],DateInput:h["a"],CurrencyInput:g["a"]},mixins:[y["a"]],props:{visible:{type:Boolean,required:!0},reservation:{type:Object,default:null},datehint:{type:Date,default:new Date}},data:function(){return{formData:null}},computed:{maxStartingDate:function(){if(this.formData.endDate)return o(this.formData.endDate).subtract(1,"days").format("YYYY-MM-DD")},minEndingDate:function(){if(this.formData.startDate)return o(this.formData.startDate).add(1,"days").format("YYYY-MM-DD")},title:function(){var t=this.reservation;if(t){var e=o(t.startDate).format("DD.MM."),a=o(t.endDate).format("DD.MM.YYYY.");return"".concat(t.holdingName," - ").concat(e," - ").concat(a)}return"New reservation"},days:function(){var t=this.formData&&this.formData.startDate&&this.formData.endDate?o(this.formData.endDate).diff(o(this.formData.startDate),"days"):0;return t},deleteAllowed:function(){return this.reservation&&"RentTracker"===this.reservation.source&&this.reservation.id}},watch:{reservation:{immediate:!0,handler:function(t){this.formData=t?Object(i["a"])({},t):{reference:"RT-".concat(o(this.datehint).format("YYYYMMDD")),source:"RentTracker",amount:0,currency:"HRK",adults:1,children:0,infants:0}}},"formData.startDate":{handler:function(t){o(t).isValid()&&"RentTracker"===this.formData.source&&this.$set(this.formData,"reference","RT-".concat(o(t).format("YYYYMMDD")))}},datehint:{immediate:!0,handler:function(t){if(!this.reservation){var e=o(this.datehint).toDate(),a=o(this.datehint).add(1,"days").toDate();this.$set(this.formData,"startDate",e),this.$set(this.formData,"endDate",a)}}}},methods:Object(i["a"])({},Object(s["b"])({createOrUpdate:"apartment/createOrUpdateReservation",delete:"apartment/deleteReservation"}),{tryDelete:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=confirm("Please confirm you want to delete the reservation."),!e){t.next=5;break}return t.next=4,this.delete(this.reservation.id);case 4:this.close();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),trySave:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.createOrUpdate(this.formData);case 3:this.close(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}));function e(){return t.apply(this,arguments)}return e}(),close:function(){this.$emit("close")}})},x=b,C=a("2877"),k=Object(C["a"])(x,d,f,!1,null,null,null),w=k.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"day relative border border-gray-400 hover:bg-gray-200 hover:border-2",class:t.dayClasses,style:t.dayStyle,attrs:{title:t.title},on:{click:t.triggerAction}},[a("span",{staticClass:"absolute top-0 left-0 p-1 md:p-2 font-bold text-xs md:text-md"},[t._v(t._s(t.dayOfMonth))]),t.startingReservation?a("div",{staticClass:"reservation-ribbon hover:shadow-lg first-day",attrs:{title:t.getReservationDescription(t.startingReservation)},on:{click:function(e){return t.openReservation(t.startingReservation)}}},[a("span",{staticClass:"guest-icon",class:t.guestIconClass},[t._v(t._s(t.getGuestInitials(t.startingReservation)))])]):t._e(),t.inProgressReservation?a("div",{staticClass:"reservation-ribbon hover:shadow-lg",attrs:{title:t.getReservationDescription(t.inProgressReservation)},on:{click:function(e){return t.openReservation(t.inProgressReservation)}}}):t._e(),t.endingReservation?a("div",{staticClass:"reservation-ribbon hover:shadow-lg last-day",attrs:{title:t.getReservationDescription(t.endingReservation)},on:{click:function(e){return t.openReservation(t.endingReservation)}}}):t._e()])},R=[],_=(a("28a5"),a("6b54"),{name:"Day",props:{day:{type:Object,required:!0}},computed:Object(i["a"])({},Object(s["c"])({getStartingReservation:"apartment/getStartingReservation",getEndingReservation:"apartment/getEndingReservation",getInProgressReservation:"apartment/getInProgressReservation"}),{startingReservation:function(){return this.getStartingReservation(this.day.dateEpoch.toString())},endingReservation:function(){return this.getEndingReservation(this.day.dateEpoch.toString())},inProgressReservation:function(){return this.getInProgressReservation(this.day.dateEpoch.toString())},title:function(){return this.day.date.toLocaleDateString()},dayOfMonth:function(){return this.day.date.getDate()},dayClasses:function(){var t=[];return this.day.isCurrentMonth||t.push("bg-gray-300 shadow-inner"),t.join(" ").trim()},dayStyle:function(){return""},reservationClass:function(){var t="";return this.startingReservation?t="first-day":this.endingReservation&&(t="last-day"),t},guestIconClass:function(){if(!this.startingReservation)return"";switch(this.startingReservation.source){case"Airbnb":return"bg-airbnb";case"Booking":return"bg-booking";default:return"bg-renttracker"}}}),methods:{triggerAction:function(){this.startingReservation&&this.inProgressReservation||this.$emit("trigger:new",this.day.date)},openReservation:function(t){this.$emit("reservation:selected",t)},getReservationDescription:function(t){var e="".concat(o(t.startDate).format("DD.MM.")," - ").concat(o(t.endDate).format("DD.MM."));return"".concat(t.holdingName," | ").concat(e)},getGuestInitials:function(t){t.holdingName||console.log(t);var e=t.holdingName.split(/\s/);return e[0][0]+e[e.length-1][0]}}}),L=_,O=(a("e805"),Object(C["a"])(L,D,R,!1,null,"6abae6a6",null)),j=O.exports,S=a("a4a1"),P={name:"Calendar",components:{RField:l["a"],Toolbar:c["a"],MonthSelector:u["a"],ReservationForm:w,Day:j,LoadingIndicator:S["a"]},mounted:function(){this.getLinkedCalendars()},data:function(){return{syncInProgress:!1,datehint:null,selectedDate:new Date,selectedReservation:null,reservationFormVisible:!1}},computed:Object(i["a"])({},Object(s["e"])({linkedCalendars:function(t){return t.apartment.linkedCalendars},isLoading:function(t){return t.apartment.status.reservation.loading}}),{weeks:function(){var t=this.selectedDate.getMonth(),e=this.selectedDate.getFullYear(),a=t,n=o().year(e).month(t).startOf("month"),r=n.startOf("week"),i=[];while(a===t)i.push({days:[0,1,2,3,4,5,6].map(function(e){var a=o(r).add(e,"d");return{dateEpoch:a.toDate().valueOf(),dayOfYear:a.dayOfYear(),date:a.toDate(),isCurrentMonth:a.get("month")===t}}),weekOfYear:r.week()}),r=o(r).add(7,"d"),a=o(r).get("month");return i}}),methods:Object(i["a"])({},Object(s["b"])({syncLinkedCalendar:"apartment/syncLinkedCalendar",getLinkedCalendars:"apartment/getLinkedCalendars"}),{newReservation:function(t){this.datehint=t,this.reservationFormVisible=!0},openReservation:function(t){this.selectedReservation=t,this.reservationFormVisible=!0},closeReservationForm:function(){this.reservationFormVisible=!1,this.selectedReservation=null},runSync:function(){var t=this;this.syncInProgress=!0;var e=this.linkedCalendars.map(function(e){return t.syncLinkedCalendar(e.id)});Promise.all(e).finally(function(){t.syncInProgress=!1})}})},E=P,$=(a("1206"),Object(C["a"])(E,n,r,!1,null,null,null));e["default"]=$.exports},df33:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.formattedValue},on:{input:function(e){return t.parseValue(e.target.value)},focus:function(e){t.isEditing=!0},blur:function(e){t.isEditing=!1},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur()}}})},r=[],i=(a("6b54"),a("a481"),a("c5f6"),a("eec9")),s={name:"CurrencyInput",inheritAttrs:!0,mixins:[i["a"]],props:{value:{type:Number,default:0},currency:{type:String,default:"HRK"}},data:function(){return{isEditing:!1}},computed:{formattedValue:function(){var t=this.value?this.value:0;return this.isEditing?t.toString().replace(".",","):t.toLocaleString("hr-HR",{style:"currency",currency:this.currency})}},methods:{parseValue:function(t){this.$emit("input",parseFloat(t.replace(",",".")))}}},o=s,l=a("2877"),c=Object(l["a"])(o,n,r,!1,null,null,null);e["a"]=c.exports},e542:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-full flex flex-col justify-start items-center md:p-4"},[t.activeApartment?a("router-view"):a("div",{staticClass:"mt-12"},[a("h1",{staticClass:"text-gray-900"},[t._v("Please pick an apartment to see the calendar")])])],1)},r=[],i=a("cebc"),s=a("2f62"),o={name:"CalendarView",computed:Object(i["a"])({},Object(s["e"])({activeApartment:function(t){return t.global.activeApartment}})),watch:{activeApartment:{immediate:!0,handler:function(t){t&&this.getReservations(t.id)}}},methods:Object(i["a"])({},Object(s["b"])({getReservations:"apartment/getReservations"}))},l=o,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,"0e9b8215",null);e["default"]=u.exports},e805:function(t,e,a){"use strict";var n=a("5eae"),r=a.n(n);r.a}}]);
//# sourceMappingURL=CalendarView.js.map