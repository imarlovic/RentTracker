(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ExpensesView"],{"0429":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-wrap flex-row items-end"},[a("r-field",{attrs:{label:"Year"}},[a("r-select",{model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},[a("option",{domProps:{value:2020}},[e._v("2020")]),a("option",{domProps:{value:2019}},[e._v("2019")]),a("option",{domProps:{value:2018}},[e._v("2018")]),a("option",{domProps:{value:2017}},[e._v("2017")])])],1),a("r-field",{attrs:{label:"Month"}},[a("r-select",{model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},[a("option",{domProps:{value:0}},[e._v("1")]),a("option",{domProps:{value:1}},[e._v("2")]),a("option",{domProps:{value:2}},[e._v("3")]),a("option",{domProps:{value:3}},[e._v("4")]),a("option",{domProps:{value:4}},[e._v("5")]),a("option",{domProps:{value:5}},[e._v("6")]),a("option",{domProps:{value:6}},[e._v("7")]),a("option",{domProps:{value:7}},[e._v("8")]),a("option",{domProps:{value:8}},[e._v("9")]),a("option",{domProps:{value:9}},[e._v("10")]),a("option",{domProps:{value:10}},[e._v("11")]),a("option",{domProps:{value:11}},[e._v("12")])])],1),a("r-field",[a("button",{staticClass:"btn mr-0 border-r-0 rounded-r-none",on:{click:e.previousMonth}},[a("i",{staticClass:"fas fa-angle-left"})]),a("button",{staticClass:"btn ml-0 border-l-0 rounded-l-none",on:{click:e.nextMonth}},[a("i",{staticClass:"fas fa-angle-right"})])]),a("r-field",[a("button",{staticClass:"btn",on:{click:e.reset}},[e._v("Today")])])],1)},n=[],o=a("0942"),r=a("8fb6"),l={name:"MonthSelector",components:{RField:o["a"],RSelect:r["a"]},props:{value:{type:Date,default:new Date}},data(){return{year:this.value.getFullYear(),month:this.value.getMonth()}},watch:{year:function(e){this.$emit("input",new Date(e,this.month,1))},month:function(e){this.$emit("input",new Date(this.year,e,1))}},methods:{previousMonth(){this.month-1<0?(this.year--,this.month=11):this.month--},nextMonth(){this.month+1>11?(this.year++,this.month=0):this.month++},reset(){let e=new Date;this.year=e.getFullYear(),this.month=e.getMonth()}}},i=l,c=a("2877"),p=Object(c["a"])(i,s,n,!1,null,null,null);t["a"]=p.exports},"50f5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex justify-center items-center p-2 md:p-4"},[e.activeApartment?a("router-view"):a("div",{staticClass:"mt-12"},[a("h1",{staticClass:"text-gray-900"},[e._v("Please pick an apartment to see the expenses")])])],1)},n=[],o=a("2f62"),r={name:"ExpensesView",computed:{...Object(o["e"])({activeApartment:e=>e.global.activeApartment})},watch:{activeApartment:{immediate:!0,handler:function(e){e&&this.getExpenses(e.id)}}},methods:{...Object(o["b"])({getExpenses:"apartment/getExpenses"})}},l=r,i=a("2877"),c=Object(i["a"])(l,s,n,!1,null,"1bb48fb4",null);t["default"]=c.exports},cf85:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"max-w-5xl w-full flex flex-col justify-center items-center md:pt-8 md:px-4"},[a("toolbar",[a("month-selector",{model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}}),a("r-field",{attrs:{label:"Search"}},[a("input",{staticClass:"input",attrs:{placeholder:"Search",type:"text"},on:{input:e.searchDebounced,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchImmediate(t)}}})])],1),a("div",{staticClass:"container flex justify-start items-end mt-4"},[a("button",{staticClass:"text-gray-600 ml-1 mr-0 font-semibold hover:text-gray-800",on:{click:e.createExpense}},[a("i",{staticClass:"pr-2 fas fa-plus"}),e._v("New expense")]),a("button",{staticClass:"text-gray-600 ml-auto mr-0 hover:text-gray-800",on:{click:e.getExpenses}},[a("i",{staticClass:"pr-4 fas fa-sync"})])]),e.filteredExpenses.length>0?a("div",{staticClass:"container mt-4"},e._l(e.filteredExpenses,function(t){return a("div",{key:t.id,staticClass:"w-full flex items-center h-12 px-4 mb-2 rounded bg-gray-200 shadow-md text-md"},[a("span",{staticClass:"max-w-64 block font-semibold text-gray-800 px-4"},[e._v(e._s(t.name))]),a("span",{staticClass:"max-w-64 block font-semibold text-gray-800 px-4",attrs:{title:t.description}},[e._v(e._s(t.description))]),a("span",{staticClass:"ml-auto block font-semibold text-gray-800 px-4"},[e._v(e._s(e._f("money")(t.amount,t.currency)))]),a("span",{staticClass:"block font-semibold text-gray-800"},[e._v(e._s(e._f("date")(t.date)))]),a("div",[a("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Edit"},on:{click:function(a){return e.editExpense(t)}}},[a("i",{staticClass:"fas fa-pen"})]),a("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Delete"},on:{click:function(a){return e.tryDeleteExpense(t)}}},[a("i",{staticClass:"fas fa-trash"})])])])}),0):e._e(),0==e.filteredExpenses.length?a("div",{staticClass:"container flex justify-center mt-16"},[e._m(0)]):e._e(),a("expense-form",{attrs:{visible:e.showExpenseForm,expense:e.selectedExpense},on:{close:e.closeExpenseForm}})],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"text-xl text-gray-600"},[a("span",{staticClass:"icon pr-2"},[a("i",{staticClass:"fas fa-frown"})]),e._v(" No expenses found")])}],o=a("2f62"),r=a("eec9"),l=a("80d1"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("r-modal",{attrs:{active:e.visible},on:{close:e.close},scopedSlots:e._u([{key:"header",fn:function(){return[a("p",{staticClass:"ml-6 my-3 font-bold  text-xl text-gray-700"},[e._v(e._s(e.title))])]},proxy:!0},{key:"default",fn:function(){return[e.formData?a("div",{staticClass:"m-6 flex flex-row flex-wrap align-center justify-between"},[a("div",{staticClass:"w-full"},[a("r-field",{attrs:{label:"Name"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.name,expression:"formData.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.formData.name},on:{input:function(t){t.target.composing||e.$set(e.formData,"name",t.target.value)}}})]),a("r-field",{attrs:{label:"Description"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.description,expression:"formData.description"}],staticClass:"input h-24",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.formData.description},on:{input:function(t){t.target.composing||e.$set(e.formData,"description",t.target.value)}}})]),a("r-field",{attrs:{label:"Date"}},[a("date-input",{staticClass:"input",attrs:{type:"date",placeholder:"Date"},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1)],1),a("div",{staticClass:"w-1/2"},[a("r-field",{attrs:{label:"Amount"}},[a("currency-input",{attrs:{placeholder:"Amount",currency:e.formData.currency},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),a("div",{staticClass:"w-1/2"},[a("r-field",{attrs:{label:"Currency"}},[a("r-select",{model:{value:e.formData.currency,callback:function(t){e.$set(e.formData,"currency",t)},expression:"formData.currency"}},[a("option",{attrs:{value:"HRK"}},[e._v("HRK")]),a("option",{attrs:{value:"EUR"}},[e._v("EUR")])])],1)],1)]):e._e()]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"m-3 flex flex-row justify-end items-center"},[a("button",{staticClass:"btn btn-primary",on:{click:e.trySave}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-save"})]),e._v(" Save")]),a("button",{staticClass:"btn btn-outline-secondary ml-auto",on:{click:e.close}},[e._v("Cancel")])])]},proxy:!0}])})},c=[],p=a("0942"),m=a("5b7c"),u=a("8fb6"),d=a("7a3f"),f=a("df33"),x=a("c1df"),h={name:"ExpenseForm",components:{RField:p["a"],RModal:m["a"],RSelect:u["a"],DateInput:d["a"],CurrencyInput:f["a"]},mixins:[r["a"]],props:{visible:{type:Boolean,required:!0},expense:{type:Object,default:null}},data(){return{formData:null}},computed:{title(){return this.expense?this.expense.name:"New expense"}},watch:{expense:{immediate:!0,handler:function(e){this.formData=e?{...e}:{name:"",description:"",date:new Date,amount:0,currency:"HRK"}}}},methods:{...Object(o["b"])({createOrUpdate:"apartment/createOrUpdateExpense"}),close(){this.$emit("close")},async trySave(){try{await this.createOrUpdate(this.formData),this.close()}catch(e){console.log(e)}}}},v=h,y=a("2877"),b=Object(y["a"])(v,i,c,!1,null,null,null),_=b.exports,w=a("8fc4"),C=a("0429"),E=(a("f7fe"),{name:"ExpenseList",components:{ExpenseForm:_,Toolbar:w["a"],MonthSelector:C["a"],RField:p["a"],RSelect:u["a"]},mixins:[r["a"],l["a"]],data(){return{selectedDate:new Date,selectedExpense:null,showExpenseForm:!1}},computed:{...Object(o["e"])({expenses:e=>e.apartment.expenses}),filteredExpenses(){let e=this.expenses;return e=this.searchQuery?e.filter(this.fieldFilter):e.filter(e=>x(e.date).isSame(this.selectedDate,"year")&&x(e.date).isSame(this.selectedDate,"month")),e}},methods:{...Object(o["b"])({getExpenses:"apartment/getExpenses",deleteExpense:"apartment/deleteExpense"}),createExpense(){this.selectedExpense=null,this.showExpenseForm=!0},editExpense(e){this.selectedExpense=e,this.showExpenseForm=!0},async tryDeleteExpense(e){await this.deleteExpense(e.id)},closeExpenseForm(){this.selectedExpense=null,this.showExpenseForm=!1}}}),D=E,g=Object(y["a"])(D,s,n,!1,null,"73ce8bcf",null);t["default"]=g.exports}}]);
//# sourceMappingURL=ExpensesView.js.map