(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ExpensesView"],{"0429":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-wrap flex-row items-end"},[a("r-field",{attrs:{label:"Year"}},[a("r-select",{model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},[a("option",{domProps:{value:2020}},[e._v("2020")]),a("option",{domProps:{value:2019}},[e._v("2019")]),a("option",{domProps:{value:2018}},[e._v("2018")]),a("option",{domProps:{value:2017}},[e._v("2017")])])],1),a("r-field",{attrs:{label:"Month"}},[a("r-select",{model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},[a("option",{domProps:{value:0}},[e._v("1")]),a("option",{domProps:{value:1}},[e._v("2")]),a("option",{domProps:{value:2}},[e._v("3")]),a("option",{domProps:{value:3}},[e._v("4")]),a("option",{domProps:{value:4}},[e._v("5")]),a("option",{domProps:{value:5}},[e._v("6")]),a("option",{domProps:{value:6}},[e._v("7")]),a("option",{domProps:{value:7}},[e._v("8")]),a("option",{domProps:{value:8}},[e._v("9")]),a("option",{domProps:{value:9}},[e._v("10")]),a("option",{domProps:{value:10}},[e._v("11")]),a("option",{domProps:{value:11}},[e._v("12")])])],1),a("r-field",[a("button",{staticClass:"btn mr-0 border-r-0 rounded-r-none",on:{click:e.previousMonth}},[a("i",{staticClass:"fas fa-angle-left"})]),a("button",{staticClass:"btn ml-0 border-l-0 rounded-l-none",on:{click:e.nextMonth}},[a("i",{staticClass:"fas fa-angle-right"})])]),a("r-field",[a("button",{staticClass:"btn",on:{click:e.reset}},[e._v("Today")])])],1)},n=[],o=a("0942"),r=a("8fb6"),i={name:"MonthSelector",components:{RField:o["a"],RSelect:r["a"]},props:{value:{type:Date,default:new Date}},data:function(){return{year:this.value.getFullYear(),month:this.value.getMonth()}},watch:{year:function(e){this.$emit("input",new Date(e,this.month,1))},month:function(e){this.$emit("input",new Date(this.year,e,1))}},methods:{previousMonth:function(){this.month-1<0?(this.year--,this.month=11):this.month--},nextMonth:function(){this.month+1>11?(this.year++,this.month=0):this.month++},reset:function(){var e=new Date;this.year=e.getFullYear(),this.month=e.getMonth()}}},l=i,c=a("2877"),u=Object(c["a"])(l,s,n,!1,null,null,null);t["a"]=u.exports},"50f5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-full flex flex-col justify-start items-center md:p-4"},[e.activeApartment?a("router-view"):a("div",{staticClass:"mt-12"},[a("h1",{staticClass:"text-gray-900"},[e._v("Please pick an apartment to see the expenses")])])],1)},n=[],o=a("cebc"),r=a("2f62"),i={name:"ExpensesView",computed:Object(o["a"])({},Object(r["e"])({activeApartment:function(e){return e.global.activeApartment}})),watch:{activeApartment:{immediate:!0,handler:function(e){e&&this.getExpenses(e.id)}}},methods:Object(o["a"])({},Object(r["b"])({getExpenses:"apartment/getExpenses"}))},l=i,c=a("2877"),u=Object(c["a"])(l,s,n,!1,null,"861ecd48",null);t["default"]=u.exports},cf85:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isLoading?a("loading-indicator"):a("div",{staticClass:"max-w-5xl w-full flex flex-col justify-center items-center sm:pt-4 md:pt-8 xl:px-4"},[a("toolbar",[a("month-selector",{model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}}),a("r-field",{attrs:{label:"Search"}},[a("input",{staticClass:"input",attrs:{placeholder:"Search",type:"text"},on:{input:e.searchDebounced,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchImmediate(t)}}})])],1),a("div",{staticClass:"min-w-full container flex justify-start items-end mt-4"},[a("button",{staticClass:"text-gray-600 ml-1 mr-0 font-semibold hover:text-gray-800",on:{click:e.createExpense}},[a("i",{staticClass:"pr-2 fas fa-plus"}),e._v("New expense")]),a("button",{staticClass:"text-gray-600 ml-auto mr-0 hover:text-gray-800",on:{click:e.getExpenses}},[a("i",{staticClass:"pr-4 fas fa-sync"})])]),e.filteredExpenses.length>0?a("div",{staticClass:"min-w-full container mt-4"},e._l(e.filteredExpenses,function(t){return a("div",{key:t.id,staticClass:"w-full flex items-center h-20 md:h-12 px-4 mb-2 rounded bg-gray-200 shadow-md text-xs md:text-sm xl:text-md"},[a("div",{staticClass:"flex flex-col md:flex-row"},[a("span",{staticClass:"max-w-64 block font-bold md:font-semibold text-gray-800 px-4"},[e._v(e._s(t.name))]),a("span",{staticClass:"max-w-64 block font-semibold text-gray-800 px-4",attrs:{title:t.description}},[e._v(e._s(t.description))])]),a("div",{staticClass:"flex flex-col md:flex-row ml-auto text-right"},[a("span",{staticClass:"block font-semibold text-gray-800 md:px-4"},[e._v(e._s(e._f("money")(t.amount,t.currency)))]),a("span",{staticClass:"block font-semibold text-gray-800"},[e._v(e._s(e._f("date")(t.date)))])]),a("div",{staticClass:"flex"},[a("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Edit"},on:{click:function(a){return e.editExpense(t)}}},[a("i",{staticClass:"fas fa-pen"})]),a("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Delete"},on:{click:function(a){return e.tryDeleteExpense(t)}}},[a("i",{staticClass:"fas fa-trash"})])])])}),0):e._e(),0==e.filteredExpenses.length?a("div",{staticClass:"container flex justify-center mt-16"},[a("p",{staticClass:"text-xl text-gray-600"},[a("span",{staticClass:"icon pr-2"},[a("i",{staticClass:"fas fa-frown"})]),e._v(" No expenses found")])]):e._e(),a("expense-form",{attrs:{visible:e.showExpenseForm,expense:e.selectedExpense},on:{close:e.closeExpenseForm}})],1)},n=[],o=(a("96cf"),a("3b8d")),r=a("cebc"),i=a("2f62"),l=a("eec9"),c=a("80d1"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("r-modal",{attrs:{active:e.visible},on:{close:e.close},scopedSlots:e._u([{key:"header",fn:function(){return[a("p",{staticClass:"ml-6 my-3 font-bold  text-xl text-gray-700"},[e._v(e._s(e.title))])]},proxy:!0},{key:"default",fn:function(){return[e.formData?a("div",{staticClass:"m-6 flex flex-row flex-wrap align-center justify-between"},[a("div",{staticClass:"w-full"},[a("r-field",{attrs:{label:"Name"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.name,expression:"formData.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.formData.name},on:{input:function(t){t.target.composing||e.$set(e.formData,"name",t.target.value)}}})]),a("r-field",{attrs:{label:"Description"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.description,expression:"formData.description"}],staticClass:"input h-24",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.formData.description},on:{input:function(t){t.target.composing||e.$set(e.formData,"description",t.target.value)}}})]),a("r-field",{attrs:{label:"Date"}},[a("date-input",{staticClass:"input",attrs:{type:"date",placeholder:"Date"},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1)],1),a("div",{staticClass:"w-1/2"},[a("r-field",{attrs:{label:"Amount"}},[a("currency-input",{attrs:{placeholder:"Amount",currency:e.formData.currency},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),a("div",{staticClass:"w-1/2"},[a("r-field",{attrs:{label:"Currency"}},[a("r-select",{model:{value:e.formData.currency,callback:function(t){e.$set(e.formData,"currency",t)},expression:"formData.currency"}},[a("option",{attrs:{value:"HRK"}},[e._v("HRK")]),a("option",{attrs:{value:"EUR"}},[e._v("EUR")])])],1)],1)]):e._e()]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"m-3 flex flex-row justify-end items-center"},[a("button",{staticClass:"btn btn-primary",on:{click:e.trySave}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-save"})]),e._v(" Save")]),a("button",{staticClass:"btn btn-outline-secondary ml-auto",on:{click:e.close}},[e._v("Cancel")])])]},proxy:!0}])})},p=[],m=(a("7f7f"),a("0942")),d=a("5b7c"),f=a("8fb6"),x=a("7a3f"),h=a("df33"),v=a("c1df"),b={name:"ExpenseForm",components:{RField:m["a"],RModal:d["a"],RSelect:f["a"],DateInput:x["a"],CurrencyInput:h["a"]},mixins:[l["a"]],props:{visible:{type:Boolean,required:!0},expense:{type:Object,default:null}},data:function(){return{formData:null}},computed:{title:function(){return this.expense?this.expense.name:"New expense"}},watch:{expense:{immediate:!0,handler:function(e){this.formData=e?Object(r["a"])({},e):{name:"",description:"",date:new Date,amount:0,currency:"HRK"}}}},methods:Object(r["a"])({},Object(i["b"])({createOrUpdate:"apartment/createOrUpdateExpense"}),{close:function(){this.$emit("close")},trySave:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createOrUpdate(this.formData);case 3:this.close(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}()})},y=b,w=a("2877"),g=Object(w["a"])(y,u,p,!1,null,null,null),C=g.exports,_=a("8fc4"),E=a("a4a1"),D=a("0429"),k=(a("f7fe"),{name:"ExpenseList",components:{ExpenseForm:C,Toolbar:_["a"],LoadingIndicator:E["a"],MonthSelector:D["a"],RField:m["a"]},mixins:[l["a"],c["a"]],data:function(){return{selectedDate:new Date,selectedExpense:null,showExpenseForm:!1}},computed:Object(r["a"])({},Object(i["e"])({isLoading:function(e){return e.apartment.status.expense.loading},expenses:function(e){return e.apartment.expenses}}),{filteredExpenses:function(){var e=this,t=this.expenses;return t=this.searchQuery?t.filter(this.fieldFilter):t.filter(function(t){return v(t.date).isSame(e.selectedDate,"year")&&v(t.date).isSame(e.selectedDate,"month")}),t}}),methods:Object(r["a"])({},Object(i["b"])({getExpenses:"apartment/getExpenses",deleteExpense:"apartment/deleteExpense"}),{createExpense:function(){this.selectedExpense=null,this.showExpenseForm=!0},editExpense:function(e){this.selectedExpense=e,this.showExpenseForm=!0},tryDeleteExpense:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deleteExpense(t.id);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),closeExpenseForm:function(){this.selectedExpense=null,this.showExpenseForm=!1}})}),j=k,O=Object(w["a"])(j,s,n,!1,null,"e27d96aa",null);t["default"]=O.exports}}]);
//# sourceMappingURL=ExpensesView.js.map