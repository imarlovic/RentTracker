(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ExpensesView"],{"0429":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-wrap flex-row items-end"},[n("r-field",{attrs:{label:"Year"}},[n("r-select",{model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},[n("option",{domProps:{value:2020}},[e._v("2020")]),n("option",{domProps:{value:2019}},[e._v("2019")]),n("option",{domProps:{value:2018}},[e._v("2018")]),n("option",{domProps:{value:2017}},[e._v("2017")])])],1),n("r-field",{attrs:{label:"Month"}},[n("r-select",{model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},[n("option",{domProps:{value:0}},[e._v("1")]),n("option",{domProps:{value:1}},[e._v("2")]),n("option",{domProps:{value:2}},[e._v("3")]),n("option",{domProps:{value:3}},[e._v("4")]),n("option",{domProps:{value:4}},[e._v("5")]),n("option",{domProps:{value:5}},[e._v("6")]),n("option",{domProps:{value:6}},[e._v("7")]),n("option",{domProps:{value:7}},[e._v("8")]),n("option",{domProps:{value:8}},[e._v("9")]),n("option",{domProps:{value:9}},[e._v("10")]),n("option",{domProps:{value:10}},[e._v("11")]),n("option",{domProps:{value:11}},[e._v("12")])])],1),n("r-field",[n("button",{staticClass:"btn mr-0 border-r-0 rounded-r-none",on:{click:e.previousMonth}},[n("i",{staticClass:"fas fa-angle-left"})]),n("button",{staticClass:"btn ml-0 border-l-0 rounded-l-none",on:{click:e.nextMonth}},[n("i",{staticClass:"fas fa-angle-right"})])]),n("r-field",[n("button",{staticClass:"btn",on:{click:e.reset}},[e._v("Today")])])],1)},s=[],r=n("0942"),o=n("8fb6"),i={name:"MonthSelector",components:{RField:r["a"],RSelect:o["a"]},props:{value:{type:Date,default:new Date}},data:function(){return{year:this.value.getFullYear(),month:this.value.getMonth()}},watch:{year:function(e){this.$emit("input",new Date(e,this.month,1))},month:function(e){this.$emit("input",new Date(this.year,e,1))}},methods:{previousMonth:function(){this.month-1<0?(this.year--,this.month=11):this.month--},nextMonth:function(){this.month+1>11?(this.year++,this.month=0):this.month++},reset:function(){var e=new Date;this.year=e.getFullYear(),this.month=e.getMonth()}}},c=i,l=n("2877"),u=Object(l["a"])(c,a,s,!1,null,null,null);t["a"]=u.exports},"14aa":function(e,t,n){},"3b2b":function(e,t,n){var a=n("7726"),s=n("5dbc"),r=n("86cc").f,o=n("9093").f,i=n("aae3"),c=n("0bfb"),l=a.RegExp,u=l,f=l.prototype,p=/a/g,d=/a/g,m=new l(p)!==p;if(n("9e1e")&&(!m||n("79e5")(function(){return d[n("2b4c")("match")]=!1,l(p)!=p||l(d)==d||"/a/i"!=l(p,"i")}))){l=function(e,t){var n=this instanceof l,a=i(e),r=void 0===t;return!n&&a&&e.constructor===l&&r?e:s(m?new u(a&&!r?e.source:e,t):u((a=e instanceof l)?e.source:e,a&&r?c.call(e):t),n?this:f,l)};for(var v=function(e){e in l||r(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},x=o(u),h=0;x.length>h;)v(x[h++]);f.constructor=l,l.prototype=f,n("2aba")(a,"RegExp",l)}n("7a56")("RegExp")},"456d":function(e,t,n){var a=n("4bf8"),s=n("0d58");n("5eda")("keys",function(){return function(e){return s(a(e))}})},"50f5":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-full flex flex-col justify-start items-center md:p-4"},[e.activeApartment?n("router-view"):n("div",{staticClass:"mt-12"},[n("h1",{staticClass:"text-gray-900"},[e._v("Please pick an apartment to see the expenses")])])],1)},s=[],r=n("cebc"),o=n("2f62"),i={name:"ExpensesView",computed:Object(r["a"])({},Object(o["e"])({activeApartment:function(e){return e.global.activeApartment}})),watch:{activeApartment:{immediate:!0,handler:function(e){e&&this.getExpenses(e.id)}}},methods:Object(r["a"])({},Object(o["b"])({getExpenses:"apartment/getExpenses"}))},c=i,l=n("2877"),u=Object(l["a"])(c,a,s,!1,null,"861ecd48",null);t["default"]=u.exports},"5b7c":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.active?n("div",{staticClass:"modal-container fixed top-0 right-0 w-screen h-screen overflow-auto flex flex-col justify-center items-center"},[n("div",{staticClass:"modal-backdrop absolute top-0 right-0 w-screen h-screen bg-gray-700 opacity-75",on:{click:e.close}}),n("div",{staticClass:"modal-content max-w-full h-full md:h-auto flex flex-col bg-white rounded shadow-lg",class:e.contentClass},[n("div",{staticClass:"modal-header"},[e._t("header")],2),n("div",{staticClass:"modal-body flex-grow md:flex-grow-0"},[e._t("default")],2),n("div",{staticClass:"modal-footer"},[e._t("footer")],2)])]):e._e()},s=[],r={name:"RModal",props:{active:{type:Boolean,required:!0},size:{type:String,default:"md"}},computed:{contentClass:function(){var e=[];switch(this.size){case"md":e.push("modal-size-md")}return e.join(" ")}},methods:{close:function(){this.$emit("close")}}},o=r,i=(n("b11f"),n("2877")),c=Object(i["a"])(o,a,s,!1,null,"6b5ed9fd",null);t["a"]=c.exports},"5eda":function(e,t,n){var a=n("5ca1"),s=n("8378"),r=n("79e5");e.exports=function(e,t){var n=(s.Object||{})[e]||Object[e],o={};o[e]=t(n),a(a.S+a.F*r(function(){n(1)}),"Object",o)}},"80d1":function(e,t,n){"use strict";n("ac6a"),n("456d"),n("3b2b");var a=n("f7fe"),s=n.n(a);t["a"]={data:function(){return{searchQuery:""}},computed:{fieldFilter:function(){var e=new RegExp(this.searchQuery,"i"),t=function(t){return Object.keys(t).some(function(n){return e.test(t[n])})};return t}},methods:{searchDebounced:s()(function(e){this.searchQuery=e.target.value},500),searchImmediate:function(e){this.searchQuery=e.target.value}}}},b11f:function(e,t,n){"use strict";var a=n("14aa"),s=n.n(a);s.a},cf85:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isLoading?n("loading-indicator"):n("div",{staticClass:"max-w-5xl w-full flex flex-col justify-center items-center sm:pt-4 md:pt-8 xl:px-4"},[n("toolbar",[n("month-selector",{model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}}),n("r-field",{attrs:{label:"Search"}},[n("input",{staticClass:"input",attrs:{placeholder:"Search",type:"text"},on:{input:e.searchDebounced,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchImmediate(t)}}})])],1),n("div",{staticClass:"min-w-full container flex justify-start items-end mt-4"},[n("button",{staticClass:"text-gray-600 ml-1 mr-0 font-semibold hover:text-gray-800",on:{click:e.createExpense}},[n("i",{staticClass:"pr-2 fas fa-plus"}),e._v("New expense")]),n("button",{staticClass:"text-gray-600 ml-auto mr-0 hover:text-gray-800",on:{click:e.getExpenses}},[n("i",{staticClass:"pr-4 fas fa-sync"})])]),e.filteredExpenses.length>0?n("div",{staticClass:"min-w-full container mt-4"},e._l(e.filteredExpenses,function(t){return n("div",{key:t.id,staticClass:"w-full flex items-center h-20 md:h-12 px-4 mb-2 rounded bg-gray-200 shadow-md text-xs md:text-sm xl:text-md"},[n("div",{staticClass:"flex flex-col md:flex-row"},[n("span",{staticClass:"max-w-64 block font-bold md:font-semibold text-gray-800 px-4"},[e._v(e._s(t.name))]),n("span",{staticClass:"max-w-64 block font-semibold text-gray-800 px-4",attrs:{title:t.description}},[e._v(e._s(t.description))])]),n("div",{staticClass:"flex flex-col md:flex-row ml-auto text-right"},[n("span",{staticClass:"block font-semibold text-gray-800 md:px-4"},[e._v(e._s(e._f("money")(t.amount,t.currency)))]),n("span",{staticClass:"block font-semibold text-gray-800"},[e._v(e._s(e._f("date")(t.date)))])]),n("div",{staticClass:"flex"},[n("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Edit"},on:{click:function(n){return e.editExpense(t)}}},[n("i",{staticClass:"fas fa-pen"})]),n("button",{staticClass:"w-6 h-full text-sm text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Delete"},on:{click:function(n){return e.tryDeleteExpense(t)}}},[n("i",{staticClass:"fas fa-trash"})])])])}),0):e._e(),0==e.filteredExpenses.length?n("div",{staticClass:"container flex justify-center mt-16"},[n("p",{staticClass:"text-xl text-gray-600"},[n("span",{staticClass:"icon pr-2"},[n("i",{staticClass:"fas fa-frown"})]),e._v(" No expenses found")])]):e._e(),n("expense-form",{attrs:{visible:e.showExpenseForm,expense:e.selectedExpense},on:{close:e.closeExpenseForm}})],1)},s=[],r=(n("96cf"),n("3b8d")),o=n("cebc"),i=n("2f62"),c=n("eec9"),l=n("80d1"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("r-modal",{attrs:{active:e.visible},on:{close:e.close},scopedSlots:e._u([{key:"header",fn:function(){return[n("p",{staticClass:"ml-6 my-3 font-bold  text-xl text-gray-700"},[e._v(e._s(e.title))])]},proxy:!0},{key:"default",fn:function(){return[e.formData?n("div",{staticClass:"m-6 flex flex-row flex-wrap align-center justify-between"},[n("div",{staticClass:"w-full"},[n("r-field",{attrs:{label:"Name"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.name,expression:"formData.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.formData.name},on:{input:function(t){t.target.composing||e.$set(e.formData,"name",t.target.value)}}})]),n("r-field",{attrs:{label:"Description"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.description,expression:"formData.description"}],staticClass:"input h-24",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.formData.description},on:{input:function(t){t.target.composing||e.$set(e.formData,"description",t.target.value)}}})]),n("r-field",{attrs:{label:"Date"}},[n("date-input",{staticClass:"input",attrs:{type:"date",placeholder:"Date"},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1)],1),n("div",{staticClass:"w-1/2"},[n("r-field",{attrs:{label:"Amount"}},[n("currency-input",{attrs:{placeholder:"Amount",currency:e.formData.currency},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),n("div",{staticClass:"w-1/2"},[n("r-field",{attrs:{label:"Currency"}},[n("r-select",{model:{value:e.formData.currency,callback:function(t){e.$set(e.formData,"currency",t)},expression:"formData.currency"}},[n("option",{attrs:{value:"HRK"}},[e._v("HRK")]),n("option",{attrs:{value:"EUR"}},[e._v("EUR")])])],1)],1)]):e._e()]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"m-3 flex flex-row justify-end items-center"},[n("button",{staticClass:"btn btn-primary",on:{click:e.trySave}},[n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-save"})]),e._v(" Save")]),n("button",{staticClass:"btn btn-outline-secondary ml-auto",on:{click:e.close}},[e._v("Cancel")])])]},proxy:!0}])})},f=[],p=(n("7f7f"),n("0942")),d=n("5b7c"),m=n("8fb6"),v=n("7a3f"),x=n("df33"),h=n("c1df"),b={name:"ExpenseForm",components:{RField:p["a"],RModal:d["a"],RSelect:m["a"],DateInput:v["a"],CurrencyInput:x["a"]},mixins:[c["a"]],props:{visible:{type:Boolean,required:!0},expense:{type:Object,default:null}},data:function(){return{formData:null}},computed:{title:function(){return this.expense?this.expense.name:"New expense"}},watch:{expense:{immediate:!0,handler:function(e){this.formData=e?Object(o["a"])({},e):{name:"",description:"",date:new Date,amount:0,currency:"HRK"}}}},methods:Object(o["a"])({},Object(i["b"])({createOrUpdate:"apartment/createOrUpdateExpense"}),{close:function(){this.$emit("close")},trySave:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createOrUpdate(this.formData);case 3:this.close(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}()})},y=b,g=n("2877"),w=Object(g["a"])(y,u,f,!1,null,null,null),C=w.exports,_=n("8fc4"),E=n("a4a1"),D=n("0429"),k=(n("f7fe"),{name:"ExpenseList",components:{ExpenseForm:C,Toolbar:_["a"],LoadingIndicator:E["a"],MonthSelector:D["a"],RField:p["a"]},mixins:[c["a"],l["a"]],data:function(){return{selectedDate:new Date,selectedExpense:null,showExpenseForm:!1}},computed:Object(o["a"])({},Object(i["e"])({isLoading:function(e){return e.apartment.status.expense.loading},expenses:function(e){return e.apartment.expenses}}),{filteredExpenses:function(){var e=this,t=this.expenses;return t=this.searchQuery?t.filter(this.fieldFilter):t.filter(function(t){return h(t.date).isSame(e.selectedDate,"year")&&h(t.date).isSame(e.selectedDate,"month")}),t}}),methods:Object(o["a"])({},Object(i["b"])({getExpenses:"apartment/getExpenses",deleteExpense:"apartment/deleteExpense"}),{createExpense:function(){this.selectedExpense=null,this.showExpenseForm=!0},editExpense:function(e){this.selectedExpense=e,this.showExpenseForm=!0},tryDeleteExpense:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deleteExpense(t.id);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),closeExpenseForm:function(){this.selectedExpense=null,this.showExpenseForm=!1}})}),j=k,O=Object(g["a"])(j,a,s,!1,null,"e27d96aa",null);t["default"]=O.exports},df33:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:e.formattedValue},on:{input:function(t){return e.parseValue(t.target.value)},focus:function(t){e.isEditing=!0},blur:function(t){e.isEditing=!1},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.target.blur()}}})},s=[],r=(n("6b54"),n("a481"),n("c5f6"),n("eec9")),o={name:"CurrencyInput",inheritAttrs:!0,mixins:[r["a"]],props:{value:{type:Number,default:0},currency:{type:String,default:"HRK"}},data:function(){return{isEditing:!1}},computed:{formattedValue:function(){var e=this.value?this.value:0;return this.isEditing?e.toString().replace(".",","):e.toLocaleString("hr-HR",{style:"currency",currency:this.currency})}},methods:{parseValue:function(e){this.$emit("input",parseFloat(e.replace(",",".")))}}},i=o,c=n("2877"),l=Object(c["a"])(i,a,s,!1,null,null,null);t["a"]=l.exports},f7fe:function(e,t,n){(function(t){var n="Expected a function",a=NaN,s="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,p=u||f||Function("return this")(),d=Object.prototype,m=d.toString,v=Math.max,x=Math.min,h=function(){return p.Date.now()};function b(e,t,a){var s,r,o,i,c,l,u=0,f=!1,p=!1,d=!0;if("function"!=typeof e)throw new TypeError(n);function m(t){var n=s,a=r;return s=r=void 0,u=t,i=e.apply(a,n),i}function b(e){return u=e,c=setTimeout(_,t),f?m(e):i}function g(e){var n=e-l,a=e-u,s=t-n;return p?x(s,o-a):s}function w(e){var n=e-l,a=e-u;return void 0===l||n>=t||n<0||p&&a>=o}function _(){var e=h();if(w(e))return E(e);c=setTimeout(_,g(e))}function E(e){return c=void 0,d&&s?m(e):(s=r=void 0,i)}function D(){void 0!==c&&clearTimeout(c),u=0,s=l=r=c=void 0}function k(){return void 0===c?i:E(h())}function j(){var e=h(),n=w(e);if(s=arguments,r=this,l=e,n){if(void 0===c)return b(l);if(p)return c=setTimeout(_,t),m(l)}return void 0===c&&(c=setTimeout(_,t)),i}return t=C(t)||0,y(a)&&(f=!!a.leading,p="maxWait"in a,o=p?v(C(a.maxWait)||0,t):o,d="trailing"in a?!!a.trailing:d),j.cancel=D,j.flush=k,j}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){return!!e&&"object"==typeof e}function w(e){return"symbol"==typeof e||g(e)&&m.call(e)==s}function C(e){if("number"==typeof e)return e;if(w(e))return a;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=i.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):o.test(e)?a:+e}e.exports=b}).call(this,n("c8ba"))}}]);
//# sourceMappingURL=ExpensesView.js.map