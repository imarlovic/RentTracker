(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ExpensesView"],{"0429":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-wrap flex-row items-end"},[a("r-field",{attrs:{label:"Year"}},[a("r-select",{model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},[a("option",{domProps:{value:2020}},[e._v("2020")]),a("option",{domProps:{value:2019}},[e._v("2019")]),a("option",{domProps:{value:2018}},[e._v("2018")]),a("option",{domProps:{value:2017}},[e._v("2017")])])],1),a("r-field",{attrs:{label:"Month"}},[a("r-select",{model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},[a("option",{domProps:{value:0}},[e._v("1")]),a("option",{domProps:{value:1}},[e._v("2")]),a("option",{domProps:{value:2}},[e._v("3")]),a("option",{domProps:{value:3}},[e._v("4")]),a("option",{domProps:{value:4}},[e._v("5")]),a("option",{domProps:{value:5}},[e._v("6")]),a("option",{domProps:{value:6}},[e._v("7")]),a("option",{domProps:{value:7}},[e._v("8")]),a("option",{domProps:{value:8}},[e._v("9")]),a("option",{domProps:{value:9}},[e._v("10")]),a("option",{domProps:{value:10}},[e._v("11")]),a("option",{domProps:{value:11}},[e._v("12")])])],1),a("r-field",[a("button",{staticClass:"btn mr-0 border-r-0 rounded-r-none",on:{click:e.previousMonth}},[a("i",{staticClass:"fas fa-angle-left"})]),a("button",{staticClass:"btn ml-0 border-l-0 rounded-l-none",on:{click:e.nextMonth}},[a("i",{staticClass:"fas fa-angle-right"})])]),a("r-field",[a("button",{staticClass:"btn",on:{click:e.reset}},[e._v("Today")])])],1)},n=[],l=a("0942"),r=a("8fb6"),o={name:"MonthSelector",components:{RField:l["a"],RSelect:r["a"]},props:{value:{type:Date,default:new Date}},data(){return{year:this.value.getFullYear(),month:this.value.getMonth()}},watch:{year:function(e){this.$emit("input",new Date(e,this.month,1))},month:function(e){this.$emit("input",new Date(this.year,e,1))}},methods:{previousMonth(){this.month-1<0?(this.year--,this.month=11):this.month--},nextMonth(){this.month+1>11?(this.year++,this.month=0):this.month++},reset(){let e=new Date;this.year=e.getFullYear(),this.month=e.getMonth()}}},i=o,c=a("2877"),u=Object(c["a"])(i,s,n,!1,null,null,null);t["a"]=u.exports},"0942":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"field"},[e.label?a("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),e._t("default")],2)},n=[],l={name:"RField",inheritAttrs:!0,props:{label:{type:String,default:null}}},r=l,o=a("2877"),i=Object(o["a"])(r,s,n,!1,null,null,null);t["a"]=i.exports},"14aa":function(e,t,a){},"3ed4":function(e,t,a){},"50f5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex justify-center items-center p-2 md:p-4"},[e.activeApartment?a("router-view"):a("div",{staticClass:"mt-12"},[a("h1",{staticClass:"text-gray-900"},[e._v("Please pick an apartment to see the expenses")])])],1)},n=[],l=a("2f62"),r={name:"ExpensesView",computed:{...Object(l["d"])({activeApartment:e=>e.global.activeApartment})},watch:{activeApartment:{immediate:!0,handler:function(e){e&&this.getExpenses(e.id)}}},methods:{...Object(l["b"])({getExpenses:"apartment/getExpenses"})}},o=r,i=a("2877"),c=Object(i["a"])(o,s,n,!1,null,"1bb48fb4",null);t["default"]=c.exports},"5b7c":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.active?a("div",{staticClass:"modal-container fixed top-0 right-0 w-screen h-screen overflow-auto flex flex-col justify-center items-center"},[a("div",{staticClass:"modal-backdrop absolute top-0 right-0 w-screen h-screen bg-gray-700 opacity-75",on:{click:e.close}}),a("div",{staticClass:"modal-content max-w-full h-full md:h-auto flex flex-col bg-white rounded shadow-lg",class:e.contentClass},[a("div",{staticClass:"modal-header"},[e._t("header")],2),a("div",{staticClass:"modal-body flex-grow md:flex-grow-0"},[e._t("default")],2),a("div",{staticClass:"modal-footer"},[e._t("footer")],2)])]):e._e()},n=[],l={name:"RModal",props:{active:{type:Boolean,required:!0},size:{type:String,default:"md"}},computed:{contentClass(){let e=[];switch(this.size){case"md":e.push("modal-size-md")}return e.join(" ")}},methods:{close(){this.$emit("close")}}},r=l,o=(a("b11f"),a("2877")),i=Object(o["a"])(r,s,n,!1,null,"6b5ed9fd",null);t["a"]=i.exports},"7a3f":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input flex items-center"},[a("input",{ref:"input",staticClass:"date-input",attrs:{type:"date",placeholder:"Check-in"},domProps:{value:e.date},on:{input:function(t){return e.parseDate(t.target.value)}}}),e._v("\n  "+e._s(e._f("date")(e.date))+"\n")])},n=[],l=a("c1df"),r=a("eec9"),o={name:"DateInput",inheritAttrs:!0,mixins:[r["a"]],props:{value:{type:Date|String,default:(new Date).toString()}},data(){return{date:this.value}},watch:{value:{immediate:!0,handler:function(e){this.date=e?l(e).format("YYYY-MM-DD"):new Date}}},methods:{parseDate(e){this.$emit("input",l(e).toDate())}}},i=o,c=(a("e8a6"),a("2877")),u=Object(c["a"])(i,s,n,!1,null,"0d6e942a",null);t["a"]=u.exports},8661:function(e,t,a){},"8fb6":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select"},[a("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.computedValue,expression:"computedValue"}],staticClass:"font-inherit appearance-none",attrs:{name:"select"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.computedValue=t.target.multiple?a:a[0]}}},"select",e.$attrs,!1),[e.placeholder?[null==e.computedValue?a("option",{attrs:{disabled:"",hidden:""},domProps:{value:null}},[e._v("\n        "+e._s(e.placeholder)+"\n      ")]):e._e()]:e._e(),e._t("default")],2),a("div",{staticClass:"pointer-events-none absolute right-0 inset-y-0 flex items-center px-2 text-gray-700"},[a("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])},n=[],l={name:"RSelect",props:{value:{type:[String,Number,Boolean,Object,Array,Symbol,Function],default:null},placeholder:String},data(){return{selected:this.value}},computed:{computedValue:{get(){return this.selected},set(e){console.log(e),this.selected=e,this.$emit("input",e)}}},watch:{value(e){this.selected=e}}},r=l,o=(a("d54d"),a("2877")),i=Object(o["a"])(r,s,n,!1,null,null,null);t["a"]=i.exports},"8fc4":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full flex flex-wrap items-end"},[e._t("default")],2)},n=[],l={name:"Toolbar"},r=l,o=a("2877"),i=Object(o["a"])(r,s,n,!1,null,null,null);t["a"]=i.exports},b11f:function(e,t,a){"use strict";var s=a("14aa"),n=a.n(s);n.a},cf85:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"max-w-5xl w-full flex flex-col justify-center items-center md:pt-8 md:px-4"},[a("toolbar",[a("month-selector",{model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1),a("div",{staticClass:"container flex justify-start items-end mt-4"},[a("button",{staticClass:"text-gray-600 ml-1 mr-0 hover:text-gray-800",on:{click:e.createExpense}},[a("i",{staticClass:"pr-2 fas fa-plus"})]),a("button",{staticClass:"text-gray-600 ml-auto mr-0 hover:text-gray-800",on:{click:e.getExpenses}},[a("i",{staticClass:"pr-4 fas fa-sync"})])]),a("div",{staticClass:"container mt-4"},e._l(e.expenses,function(t){return a("div",{key:t.id,staticClass:"w-full flex items-center h-12 px-4 mb-2 rounded bg-gray-200 shadow-md text-md"},[a("span",{staticClass:"max-w-64 block font-semibold text-gray-800 px-4"},[e._v(e._s(t.name))]),a("span",{staticClass:"max-w-64 block font-semibold text-gray-800 px-4",attrs:{title:t.description}},[e._v(e._s(t.description))]),a("span",{staticClass:"ml-auto block font-semibold text-gray-800 px-4"},[e._v(e._s(e._f("money")(t.amount,t.currency)))]),a("span",{staticClass:"block font-semibold text-gray-800"},[e._v(e._s(e._f("date")(t.date)))]),a("div",[a("button",{staticClass:"w-6 h-full text-xs text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Edit"},on:{click:function(a){return e.editExpense(t)}}},[a("i",{staticClass:"fas fa-pen"})]),a("button",{staticClass:"w-6 h-full text-xs text-gray-600 ml-4 hover:text-gray-800",attrs:{title:"Delete"},on:{click:function(a){return e.tryDeleteExpense(t)}}},[a("i",{staticClass:"fas fa-trash"})])])])}),0),a("expense-form",{attrs:{visible:e.showExpenseForm,expense:e.selectedExpense},on:{close:e.closeExpenseForm}})],1)},n=[],l=a("2f62"),r=a("eec9"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("r-modal",{attrs:{active:e.visible},on:{close:e.close},scopedSlots:e._u([{key:"header",fn:function(){return[a("p",{staticClass:"ml-6 my-3 font-bold  text-xl text-gray-700"},[e._v(e._s(e.title))])]},proxy:!0},{key:"default",fn:function(){return[e.formData?a("div",{staticClass:"m-6 flex flex-row flex-wrap align-center justify-between"},[a("div",{staticClass:"w-full"},[a("r-field",{attrs:{label:"Name"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.name,expression:"formData.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.formData.name},on:{input:function(t){t.target.composing||e.$set(e.formData,"name",t.target.value)}}})]),a("r-field",{attrs:{label:"Description"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.description,expression:"formData.description"}],staticClass:"input h-24",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.formData.description},on:{input:function(t){t.target.composing||e.$set(e.formData,"description",t.target.value)}}})]),a("r-field",{attrs:{label:"Date"}},[a("date-input",{staticClass:"input",attrs:{type:"date",placeholder:"Date"},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1)],1),a("div",{staticClass:"w-1/2"},[a("r-field",{attrs:{label:"Amount"}},[a("currency-input",{attrs:{placeholder:"Amount",currency:e.formData.currency},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),a("div",{staticClass:"w-1/2"},[a("r-field",{attrs:{label:"Currency"}},[a("r-select",{model:{value:e.formData.currency,callback:function(t){e.$set(e.formData,"currency",t)},expression:"formData.currency"}},[a("option",{attrs:{value:"HRK"}},[e._v("HRK")]),a("option",{attrs:{value:"EUR"}},[e._v("EUR")])])],1)],1)]):e._e()]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"m-3 flex flex-row justify-end items-center"},[a("button",{staticClass:"btn btn-primary",on:{click:e.trySave}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-save"})]),e._v(" Save")]),a("button",{staticClass:"btn btn-outline-secondary ml-auto",on:{click:e.close}},[e._v("Cancel")])])]},proxy:!0}])})},i=[],c=a("0942"),u=a("5b7c"),p=a("8fb6"),d=a("7a3f"),m=a("df33"),f=(a("c1df"),{name:"ExpenseForm",components:{RField:c["a"],RModal:u["a"],RSelect:p["a"],DateInput:d["a"],CurrencyInput:m["a"]},mixins:[r["a"]],props:{visible:{type:Boolean,required:!0},expense:{type:Object,default:null}},data(){return{formData:null}},computed:{title(){return this.expense?this.expense.name:"New expense"}},watch:{expense:{immediate:!0,handler:function(e){this.formData=e?{...e}:{name:"",description:"",date:new Date,amount:0,currency:"HRK"}}}},methods:{...Object(l["b"])({createOrUpdate:"apartment/createOrUpdateExpense"}),close(){this.$emit("close")},async trySave(){try{await this.createOrUpdate(this.formData),this.close()}catch(e){console.log(e)}}}}),v=f,h=a("2877"),x=Object(h["a"])(v,o,i,!1,null,null,null),b=x.exports,y=a("8fc4"),g=a("0429"),_={name:"ExpenseList",components:{ExpenseForm:b,Toolbar:y["a"],MonthSelector:g["a"],RField:c["a"],RSelect:p["a"]},mixins:[r["a"]],data(){return{selectedDate:new Date,selectedExpense:null,showExpenseForm:!1}},computed:{...Object(l["d"])({expenses:e=>e.apartment.expenses})},methods:{...Object(l["b"])({getExpenses:"apartment/getExpenses",deleteExpense:"apartment/deleteExpense"}),createExpense(){this.selectedExpense=null,this.showExpenseForm=!0},editExpense(e){this.selectedExpense=e,this.showExpenseForm=!0},async tryDeleteExpense(e){await this.deleteExpense(e.id)},closeExpenseForm(){this.selectedExpense=null,this.showExpenseForm=!1}}},w=_,C=Object(h["a"])(w,s,n,!1,null,"7e4fda79",null);t["default"]=C.exports},d54d:function(e,t,a){"use strict";var s=a("3ed4"),n=a.n(s);n.a},df33:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:e.formattedValue},on:{input:function(t){return e.parseValue(t.target.value)},focus:function(t){e.isEditing=!0},blur:function(t){e.isEditing=!1},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.target.blur()}}})},n=[],l=a("eec9"),r={name:"CurrencyInput",inheritAttrs:!0,mixins:[l["a"]],props:{value:{type:Number,default:0},currency:{type:String,default:"HRK"}},data(){return{isEditing:!1}},computed:{formattedValue(){let e=this.value?this.value:0;return this.isEditing?e.toString().replace(".",","):e.toLocaleString("hr-HR",{style:"currency",currency:this.currency})}},methods:{parseValue(e){this.$emit("input",parseFloat(e.replace(",",".")))}}},o=r,i=a("2877"),c=Object(i["a"])(o,s,n,!1,null,null,null);t["a"]=c.exports},e8a6:function(e,t,a){"use strict";var s=a("8661"),n=a.n(s);n.a},eec9:function(e,t,a){"use strict";var s=a("c1df");t["a"]={filters:{money:function(e,t){let a=e.toLocaleString("hr-HR",{style:"currency",currency:t});return a},moneyShort:function(e,t){let a=e>=1e6?"M":e>=1e3?"K":null;"M"==a&&(e/=1e6),"K"==a&&(e/=1e3);let s=e.toLocaleString("hr-HR",{style:"decimal",maximumFractionDigits:1,minimumFractionDigits:1});return a&&(s=`${s} ${a} ${t}`),s},date:function(e){return s(e).format("DD.MM.YYYY.")}}}}}]);
//# sourceMappingURL=ExpensesView.js.map